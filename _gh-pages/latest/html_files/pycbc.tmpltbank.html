<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pycbc.tmpltbank package &mdash; PyCBC 0.0a8230 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="_static/terminal.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/typed.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pycbc.psd package" href="pycbc.psd.html" />
    <link rel="prev" title="PyCBC template bank generation documentation (pycbc.tmpltbank)" href="tmpltbank.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> PyCBC
          </a>
              <div class="version">
                1.18.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="credit.html">Use of PyCBC in Scientific Publications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Running PyCBC under Docker</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="inference.html">PyCBC inference documentation (<code class="docutils literal notranslate"><span class="pre">pycbc.inference</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workflow/pycbc_make_psd_estimation_workflow.html"><code class="docutils literal notranslate"><span class="pre">pycbc_make_psd_estimation_workflow</span></code>: A workflow generator for noise estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow/pycbc_make_coinc_search_workflow.html"><code class="docutils literal notranslate"><span class="pre">pycbc_make_coinc_search_workflow</span></code>: A workflow to search for gravitational waves</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow/pygrb.html"><code class="docutils literal notranslate"><span class="pre">pycbc_make_offline_grb_workflow</span></code>: A GRB triggered CBC analysis workflow generator</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="tmpltbank.html">PyCBC template bank generation documentation (<code class="docutils literal notranslate"><span class="pre">pycbc.tmpltbank</span></code>)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tmpltbank.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmpltbank.html#non-spin-bank-placement-pycbc-geom-nonspinbank">Non spin bank placement: pycbc_geom_nonspinbank</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmpltbank.html#aligned-spin-geometric-placement-pycbc-geom-aligned-bank">Aligned-spin geometric placement: pycbc_geom_aligned_bank</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmpltbank.html#aligned-spin-stochastic-placement">Aligned-spin stochastic placement</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmpltbank.html#hybrid-approaches-the-best-of-both-worlds">Hybrid approaches: the best of both worlds</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="tmpltbank.html#the-module-s-source-code">The module’s source code</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">pycbc.tmpltbank package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pycbc.tmpltbank.bank_output_utils">pycbc.tmpltbank.bank_output_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pycbc.tmpltbank.brute_force_methods">pycbc.tmpltbank.brute_force_methods module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pycbc.tmpltbank.calc_moments">pycbc.tmpltbank.calc_moments module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pycbc.tmpltbank.coord_utils">pycbc.tmpltbank.coord_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pycbc.tmpltbank.em_progenitors">pycbc.tmpltbank.em_progenitors module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pycbc.tmpltbank.lambda_mapping">pycbc.tmpltbank.lambda_mapping module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pycbc.tmpltbank.lattice_utils">pycbc.tmpltbank.lattice_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pycbc.tmpltbank.option_utils">pycbc.tmpltbank.option_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pycbc.tmpltbank.partitioned_bank">pycbc.tmpltbank.partitioned_bank module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pycbc.tmpltbank">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pycbc.psd.html">pycbc.psd package</a></li>
<li class="toctree-l3"><a class="reference internal" href="pycbc.noise.html">pycbc.noise package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hwinj.html">Hardware injection waveform generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="banksim.html">Calculating the Effectualness (Fitting Factor) of Template Banks</a></li>
<li class="toctree-l1"><a class="reference internal" href="faithsim.html">Dag Generator for Doing Faithfulness Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="upload_to_gracedb.html">Uploading triggers to gracedb</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="waveform_plugin.html">Making new waveform approximants available to PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="catalog.html">Catalog of Observed Gravitational-wave Mergers</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataquality.html">Query times of valid data, hardware injections, and more.</a></li>
<li class="toctree-l1"><a class="reference internal" href="frame.html">Reading Gravitational-wave Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="fft.html">Performing FFTs in PyCBC</a></li>
<li class="toctree-l1"><a class="reference internal" href="gw150914.html">Signal Processing with GW150914</a></li>
<li class="toctree-l1"><a class="reference internal" href="detector.html">Gravitational-wave Detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="psd.html">Handling PSDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise.html">Generating Noise</a></li>
<li class="toctree-l1"><a class="reference internal" href="waveform.html">Waveforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="filter.html">Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributions.html">Using PyCBC Distributions from PyCBC Inference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="building_bundled_executables.html">Building Bundled Executables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Documenting PyCBC code</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Creating Releases of PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="formats/hdf_format.html">HDF files within the PyCBC workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal notranslate"><span class="pre">pycbc.workflow</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">pycbc</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PyCBC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="tmpltbank.html">PyCBC template bank generation documentation (<code class="docutils literal notranslate"><span class="pre">pycbc.tmpltbank</span></code>)</a> &raquo;</li>
      <li>pycbc.tmpltbank package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/pycbc.tmpltbank.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="pycbc-tmpltbank-package">
<h1>pycbc.tmpltbank package<a class="headerlink" href="#pycbc-tmpltbank-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-pycbc.tmpltbank.bank_output_utils">
<span id="pycbc-tmpltbank-bank-output-utils-module"></span><h2>pycbc.tmpltbank.bank_output_utils module<a class="headerlink" href="#module-pycbc.tmpltbank.bank_output_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pycbc.tmpltbank.bank_output_utils.calculate_ethinca_metric_comps">
<code class="descclassname">pycbc.tmpltbank.bank_output_utils.</code><code class="descname">calculate_ethinca_metric_comps</code><span class="sig-paren">(</span><em>metricParams</em>, <em>ethincaParams</em>, <em>mass1</em>, <em>mass2</em>, <em>spin1z=0.0</em>, <em>spin2z=0.0</em>, <em>full_ethinca=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/bank_output_utils.html#calculate_ethinca_metric_comps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.bank_output_utils.calculate_ethinca_metric_comps" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Gamma components needed to use the ethinca metric.
At present this outputs the standard TaylorF2 metric over the end time
and chirp times     au_0 and        au_3.
A desirable upgrade might be to use the chi coordinates [defined WHERE?]
for metric distance instead of      au_0 and        au_3.
The lower frequency cutoff is currently hard-coded to be the same as the
bank layout options fLow and f0 (which must be the same as each other).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric
and the eigenvalues, eigenvectors and covariance matrix
needed to manipulate the space.</li>
<li><strong>ethincaParams</strong> (<em>ethincaParameters instance</em>) – Structure holding options relevant to the ethinca metric computation.</li>
<li><strong>mass1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Mass of the heavier body in the considered template.</li>
<li><strong>mass2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Mass of the lighter body in the considered template.</li>
<li><strong>spin1z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em> (</em><em>optional</em><em>, </em><em>default=0</em><em>)</em>) – Spin of the heavier body in the considered template.</li>
<li><strong>spin2z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em> (</em><em>optional</em><em>, </em><em>default=0</em><em>)</em>) – Spin of the lighter body in the considered template.</li>
<li><strong>full_ethinca</strong> (<em>boolean</em><em> (</em><em>optional</em><em>, </em><em>default=True</em><em>)</em>) – If True calculate the ethinca components in all 3 directions (mass1,
mass2 and time). If False calculate only the time component (which is
stored in Gamma0).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>fMax_theor</strong> (<em>float</em>) – Value of the upper frequency cutoff given by the template parameters
and the cutoff formula requested.</li>
<li><strong>gammaVals</strong> (<em>numpy_array</em>) – Array holding 6 independent metric components in
(end_time, tau_0, tau_3) coordinates to be stored in the Gamma0-5
slots of a SnglInspiral object.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.bank_output_utils.convert_to_sngl_inspiral_table">
<code class="descclassname">pycbc.tmpltbank.bank_output_utils.</code><code class="descname">convert_to_sngl_inspiral_table</code><span class="sig-paren">(</span><em>params</em>, <em>proc_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/bank_output_utils.html#convert_to_sngl_inspiral_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.bank_output_utils.convert_to_sngl_inspiral_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a list of m1,m2,spin1z,spin2z values into a basic sngl_inspiral
table with mass and spin parameters populated and event IDs assigned</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>params</strong> (<em>iterable</em>) – Each entry in the params iterable should be a sequence of
[mass1, mass2, spin1z, spin2z] in that order</li>
<li><strong>proc_id</strong> (<em>ilwd char</em>) – Process ID to add to each row of the sngl_inspiral table</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Bank of templates in SnglInspiralTable format</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">SnglInspiralTable</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.bank_output_utils.output_sngl_inspiral_table">
<code class="descclassname">pycbc.tmpltbank.bank_output_utils.</code><code class="descname">output_sngl_inspiral_table</code><span class="sig-paren">(</span><em>outputFile</em>, <em>tempBank</em>, <em>metricParams</em>, <em>ethincaParams</em>, <em>programName=''</em>, <em>optDict=None</em>, <em>outdoc=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/bank_output_utils.html#output_sngl_inspiral_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.bank_output_utils.output_sngl_inspiral_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that converts the information produced by the various pyCBC bank
generation codes into a valid LIGOLW xml file containing a sngl_inspiral
table and outputs to file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>outputFile</strong> (<em>string</em>) – Name of the file that the bank will be written to</li>
<li><strong>tempBank</strong> (<em>iterable</em>) – Each entry in the tempBank iterable should be a sequence of
[mass1,mass2,spin1z,spin2z] in that order.</li>
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric
and the eigenvalues, eigenvectors and covariance matrix
needed to manipulate the space.</li>
<li><strong>ethincaParams</strong> (<em>{ethincaParameters instance</em><em>, </em><em>None}</em>) – Structure holding options relevant to the ethinca metric computation
including the upper frequency cutoff to be used for filtering.
NOTE: The computation is currently only valid for non-spinning systems
and uses the TaylorF2 approximant.</li>
<li><strong>(</strong><strong>key-word-argument</strong><strong>)</strong> (<em>programName</em>) – Name of the executable that has been run</li>
<li><strong>(</strong><strong>key-word argument</strong><strong>)</strong> (<em>outdoc</em>) – Dictionary of the command line arguments passed to the program</li>
<li><strong>(</strong><strong>key-word argument</strong><strong>)</strong> – If given add template bank to this representation of a xml document and
write to disk. If not given create a new document.</li>
<li><strong>kwargs</strong> (<em>key-word arguments</em>) – All other key word arguments will be passed directly to
ligolw_process.register_to_xmldoc</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.bank_output_utils.return_empty_sngl">
<code class="descclassname">pycbc.tmpltbank.bank_output_utils.</code><code class="descname">return_empty_sngl</code><span class="sig-paren">(</span><em>nones=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/bank_output_utils.html#return_empty_sngl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.bank_output_utils.return_empty_sngl" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to create a SnglInspiral object where all columns are populated
but all are set to values that test False (ie. strings to ‘’, floats/ints
to 0, …). This avoids errors when you try to create a table containing
columns you don’t care about, but which still need populating. NOTE: This
will also produce a process_id and event_id with 0 values. For most
applications these should be set to their correct values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>nones</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em> (</em><em>False</em><em>)</em>) – If True, just set all columns to None.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The “empty” SnglInspiral object.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">lsctables.SnglInspiral</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.bank_output_utils.return_search_summary">
<code class="descclassname">pycbc.tmpltbank.bank_output_utils.</code><code class="descname">return_search_summary</code><span class="sig-paren">(</span><em>start_time=0</em>, <em>end_time=0</em>, <em>nevents=0</em>, <em>ifos=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/bank_output_utils.html#return_search_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.bank_output_utils.return_search_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to create a SearchSummary object where all columns are populated
but all are set to values that test False (ie. strings to ‘’, floats/ints
to 0, …). This avoids errors when you try to create a table containing
columns you don’t care about, but which still need populating. NOTE: This
will also produce a process_id with 0 values. For most applications these
should be set to their correct values.</p>
<p>It then populates columns if given them as options.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The “empty” SearchSummary object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">lsctables.SeachSummary</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-pycbc.tmpltbank.brute_force_methods">
<span id="pycbc-tmpltbank-brute-force-methods-module"></span><h2>pycbc.tmpltbank.brute_force_methods module<a class="headerlink" href="#module-pycbc.tmpltbank.brute_force_methods" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pycbc.tmpltbank.brute_force_methods.find_xi_extrema_brute">
<code class="descclassname">pycbc.tmpltbank.brute_force_methods.</code><code class="descname">find_xi_extrema_brute</code><span class="sig-paren">(</span><em>xis</em>, <em>bestMasses</em>, <em>bestXis</em>, <em>direction_num</em>, <em>req_match</em>, <em>massRangeParams</em>, <em>metricParams</em>, <em>fUpper</em>, <em>find_minimum=False</em>, <em>scaleFactor=0.8</em>, <em>numIterations=3000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/brute_force_methods.html#find_xi_extrema_brute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.brute_force_methods.find_xi_extrema_brute" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used to find the largest or smallest value of the xi
space in a specified
dimension at a specified point in the higher dimensions. It does this by
iteratively throwing points at the space to find extrema.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xis</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em> or </em><em>array</em>) – Position in the xi space at which to assess the depth. This can be only
a subset of the higher dimensions than that being sampled.</li>
<li><strong>bestMasses</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – Contains [totalMass, eta, spin1z, spin2z]. Is a physical position
mapped to xi coordinates in bestXis that is close to the xis point.
This is aimed to give the code a starting point.</li>
<li><strong>bestXis</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – Contains the position of bestMasses in the xi coordinate system.</li>
<li><strong>direction_num</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The dimension that you want to assess the depth of (0 = 1, 1 = 2 …)</li>
<li><strong>req_match</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – When considering points to assess the depth with, only consider points
with a mismatch that is smaller than this with xis.</li>
<li><strong>massRangeParams</strong> (<em>massRangeParameters instance</em>) – Instance holding all the details of mass ranges and spin ranges.</li>
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric
and the eigenvalues, eigenvectors and covariance matrix
needed to manipulate the space.</li>
<li><strong>fUpper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The value of fUpper that was used when obtaining the xi_i
coordinates. This lets us know how to rotate potential physical points
into the correct xi_i space. This must be a key in metricParams.evals,
metricParams.evecs and metricParams.evecsCV
(ie. we must know how to do the transformation for
the given value of fUpper)</li>
<li><strong>find_minimum</strong> (<em>boolean</em><em>, </em><em>optional</em><em> (</em><em>default = False</em><em>)</em>) – If True, find the minimum value of the xi direction. If False find the
maximum value.</li>
<li><strong>scaleFactor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>default = 0.8</em><em>)</em>) – The value of the scale factor that is used when calling
pycbc.tmpltbank.get_mass_distribution.</li>
<li><strong>numIterations</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em><em> (</em><em>default = 3000</em><em>)</em>) – The number of times to make calls to get_mass_distribution when
assessing the maximum/minimum of this parameter space. Making this
smaller makes the code faster, but at the cost of accuracy.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>xi_extent</strong> – The extremal value of the specified dimension at the specified point in
parameter space.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.brute_force_methods.get_mass_distribution">
<code class="descclassname">pycbc.tmpltbank.brute_force_methods.</code><code class="descname">get_mass_distribution</code><span class="sig-paren">(</span><em>bestMasses</em>, <em>scaleFactor</em>, <em>massRangeParams</em>, <em>metricParams</em>, <em>fUpper</em>, <em>numJumpPoints=100</em>, <em>chirpMassJumpFac=0.0001</em>, <em>etaJumpFac=0.01</em>, <em>spin1zJumpFac=0.01</em>, <em>spin2zJumpFac=0.01</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/brute_force_methods.html#get_mass_distribution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.brute_force_methods.get_mass_distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a set of masses, this function will create a set of points nearby
in the mass space and map these to the xi space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>bestMasses</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – Contains [ChirpMass, eta, spin1z, spin2z]. Points will be placed around
tjos</li>
<li><strong>scaleFactor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – This parameter describes the radius away from bestMasses that points
will be placed in.</li>
<li><strong>massRangeParams</strong> (<em>massRangeParameters instance</em>) – Instance holding all the details of mass ranges and spin ranges.</li>
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric
and the eigenvalues, eigenvectors and covariance matrix
needed to manipulate the space.</li>
<li><strong>fUpper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The value of fUpper that was used when obtaining the xi_i
coordinates. This lets us know how to rotate potential physical points
into the correct xi_i space. This must be a key in metricParams.evals,
metricParams.evecs and metricParams.evecsCV
(ie. we must know how to do the transformation for
the given value of fUpper)</li>
<li><strong>numJumpPoints</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em><em> (</em><em>default = 100</em><em>)</em>) – The number of points that will be generated every iteration</li>
<li><strong>chirpMassJumpFac</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>default=0.0001</em><em>)</em>) – The jump points will be chosen with fractional variation in chirpMass
up to this multiplied by scaleFactor.</li>
<li><strong>etaJumpFac</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>default=0.01</em><em>)</em>) – The jump points will be chosen with fractional variation in eta
up to this multiplied by scaleFactor.</li>
<li><strong>spin1zJumpFac</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>default=0.01</em><em>)</em>) – The jump points will be chosen with absolute variation in spin1z up to
this multiplied by scaleFactor.</li>
<li><strong>spin2zJumpFac</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>default=0.01</em><em>)</em>) – The jump points will be chosen with absolute variation in spin2z up to
this multiplied by scaleFactor.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>Totmass</strong> (<em>numpy.array</em>) – Total mass of the resulting points</li>
<li><strong>Eta</strong> (<em>numpy.array</em>) – Symmetric mass ratio of the resulting points</li>
<li><strong>Spin1z</strong> (<em>numpy.array</em>) – Spin of the heavier body of the resulting points</li>
<li><strong>Spin2z</strong> (<em>numpy.array</em>) – Spin of the smaller body of the resulting points</li>
<li><strong>Diff</strong> (<em>numpy.array</em>) – Mass1 - Mass2 of the resulting points</li>
<li><strong>Mass1</strong> (<em>numpy.array</em>) – Mass1 (mass of heavier body) of the resulting points</li>
<li><strong>Mass2</strong> (<em>numpy.array</em>) – Mass2 (mass of smaller body) of the resulting points</li>
<li><strong>new_xis</strong> (<em>list of numpy.array</em>) – Position of points in the xi coordinates</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.brute_force_methods.get_physical_covaried_masses">
<code class="descclassname">pycbc.tmpltbank.brute_force_methods.</code><code class="descname">get_physical_covaried_masses</code><span class="sig-paren">(</span><em>xis</em>, <em>bestMasses</em>, <em>bestXis</em>, <em>req_match</em>, <em>massRangeParams</em>, <em>metricParams</em>, <em>fUpper</em>, <em>giveUpThresh=5000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/brute_force_methods.html#get_physical_covaried_masses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.brute_force_methods.get_physical_covaried_masses" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes the position of a point in the xi parameter space and
iteratively finds a close point in the physical coordinate space (masses
and spins).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xis</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em> or </em><em>array</em>) – Desired position of the point in the xi space. If only N values are
provided and the xi space’s dimension is larger then it is assumed that
<em>any</em> value in the remaining xi coordinates is acceptable.</li>
<li><strong>bestMasses</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – Contains [totalMass, eta, spin1z, spin2z]. Is a physical position
mapped to xi coordinates in bestXis that is close to the desired point.
This is aimed to give the code a starting point.</li>
<li><strong>bestXis</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – Contains the position of bestMasses in the xi coordinate system.</li>
<li><strong>req_match</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Desired maximum mismatch between xis and the obtained point. If a point
is found with mismatch &lt; req_match immediately stop and return that
point. A point with this mismatch will not always be found.</li>
<li><strong>massRangeParams</strong> (<em>massRangeParameters instance</em>) – Instance holding all the details of mass ranges and spin ranges.</li>
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric
and the eigenvalues, eigenvectors and covariance matrix
needed to manipulate the space.</li>
<li><strong>fUpper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The value of fUpper that was used when obtaining the xi_i
coordinates. This lets us know how to rotate potential physical points
into the correct xi_i space. This must be a key in metricParams.evals,
metricParams.evecs and metricParams.evecsCV
(ie. we must know how to do the transformation for
the given value of fUpper)</li>
<li><strong>giveUpThresh</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em><em> (</em><em>default = 5000</em><em>)</em>) – The program will try this many iterations. If no close matching point
has been found after this it will give up.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>mass1</strong> (<em>float</em>) – The heavier mass of the obtained point.</li>
<li><strong>mass2</strong> (<em>float</em>) – The smaller mass of the obtained point</li>
<li><strong>spin1z</strong> (<em>float</em>) – The heavier bodies spin of the obtained point.</li>
<li><strong>spin2z</strong> (<em>float</em>) – The smaller bodies spin of the obtained point.</li>
<li><strong>count</strong> (<em>int</em>) – How many iterations it took to find the point. For debugging.</li>
<li><strong>mismatch</strong> (<em>float</em>) – The mismatch between the obtained point and the input xis.</li>
<li><strong>new_xis</strong> (<em>list</em>) – The position of the point in the xi space</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.brute_force_methods.stack_xi_direction_brute">
<code class="descclassname">pycbc.tmpltbank.brute_force_methods.</code><code class="descname">stack_xi_direction_brute</code><span class="sig-paren">(</span><em>xis</em>, <em>bestMasses</em>, <em>bestXis</em>, <em>direction_num</em>, <em>req_match</em>, <em>massRangeParams</em>, <em>metricParams</em>, <em>fUpper</em>, <em>scaleFactor=0.8</em>, <em>numIterations=3000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/brute_force_methods.html#stack_xi_direction_brute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.brute_force_methods.stack_xi_direction_brute" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used to assess the depth of the xi_space in a specified
dimension at a specified point in the higher dimensions. It does this by
iteratively throwing points at the space to find maxima and minima.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xis</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em> or </em><em>array</em>) – Position in the xi space at which to assess the depth. This can be only
a subset of the higher dimensions than that being sampled.</li>
<li><strong>bestMasses</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – Contains [totalMass, eta, spin1z, spin2z]. Is a physical position
mapped to xi coordinates in bestXis that is close to the xis point.
This is aimed to give the code a starting point.</li>
<li><strong>bestXis</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – Contains the position of bestMasses in the xi coordinate system.</li>
<li><strong>direction_num</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The dimension that you want to assess the depth of (0 = 1, 1 = 2 …)</li>
<li><strong>req_match</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – When considering points to assess the depth with, only consider points
with a mismatch that is smaller than this with xis.</li>
<li><strong>massRangeParams</strong> (<em>massRangeParameters instance</em>) – Instance holding all the details of mass ranges and spin ranges.</li>
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric
and the eigenvalues, eigenvectors and covariance matrix
needed to manipulate the space.</li>
<li><strong>fUpper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The value of fUpper that was used when obtaining the xi_i
coordinates. This lets us know how to rotate potential physical points
into the correct xi_i space. This must be a key in metricParams.evals,
metricParams.evecs and metricParams.evecsCV
(ie. we must know how to do the transformation for
the given value of fUpper)</li>
<li><strong>scaleFactor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>default = 0.8</em><em>)</em>) – The value of the scale factor that is used when calling
pycbc.tmpltbank.get_mass_distribution.</li>
<li><strong>numIterations</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em><em> (</em><em>default = 3000</em><em>)</em>) – The number of times to make calls to get_mass_distribution when
assessing the maximum/minimum of this parameter space. Making this
smaller makes the code faster, but at the cost of accuracy.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><p class="first"><strong>xi_min</strong> (<em>float</em>) – The minimal value of the specified dimension at the specified point in
parameter space.</p>
</li>
<li><p class="first"><strong>xi_max</strong> (<em>float</em>) –</p>
<dl class="docutils">
<dt>The maximal value of the specified dimension at the specified point in</dt>
<dd><p class="first last">parameter space.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-pycbc.tmpltbank.calc_moments">
<span id="pycbc-tmpltbank-calc-moments-module"></span><h2>pycbc.tmpltbank.calc_moments module<a class="headerlink" href="#module-pycbc.tmpltbank.calc_moments" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pycbc.tmpltbank.calc_moments.calculate_metric">
<code class="descclassname">pycbc.tmpltbank.calc_moments.</code><code class="descname">calculate_metric</code><span class="sig-paren">(</span><em>Js</em>, <em>logJs</em>, <em>loglogJs</em>, <em>logloglogJs</em>, <em>loglogloglogJs</em>, <em>mapping</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/calc_moments.html#calculate_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.calc_moments.calculate_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will take the various integrals calculated by get_moments and
convert this into a metric for the appropriate parameter space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Js</strong> (<em>Dictionary</em>) – The list of (log^0 x) * x**(-i/3) integrals computed by get_moments()
The index is Js[i]</li>
<li><strong>logJs</strong> (<em>Dictionary</em>) – The list of (log^1 x) * x**(-i/3) integrals computed by get_moments()
The index is logJs[i]</li>
<li><strong>loglogJs</strong> (<em>Dictionary</em>) – The list of (log^2 x) * x**(-i/3) integrals computed by get_moments()
The index is loglogJs[i]</li>
<li><strong>logloglogJs</strong> (<em>Dictionary</em>) – The list of (log^3 x) * x**(-i/3) integrals computed by get_moments()
The index is logloglogJs[i]</li>
<li><strong>loglogloglogJs</strong> (<em>Dictionary</em>) – The list of (log^4 x) * x**(-i/3) integrals computed by get_moments()
The index is loglogloglogJs[i]</li>
<li><strong>mapping</strong> (<em>dictionary</em>) – Used to identify which Lambda components are active in this parameter
space and map these to entries in the metric matrix.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>metric</strong> – The resulting metric.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.matrix</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.calc_moments.calculate_metric_comp">
<code class="descclassname">pycbc.tmpltbank.calc_moments.</code><code class="descname">calculate_metric_comp</code><span class="sig-paren">(</span><em>gs</em>, <em>unmax_metric</em>, <em>i</em>, <em>j</em>, <em>Js</em>, <em>logJs</em>, <em>loglogJs</em>, <em>logloglogJs</em>, <em>loglogloglogJs</em>, <em>mapping</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/calc_moments.html#calculate_metric_comp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.calc_moments.calculate_metric_comp" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to compute part of the metric. Only call this from within
calculate_metric(). Please see the documentation for that function.</p>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.calc_moments.calculate_moment">
<code class="descclassname">pycbc.tmpltbank.calc_moments.</code><code class="descname">calculate_moment</code><span class="sig-paren">(</span><em>psd_f</em>, <em>psd_amp</em>, <em>fmin</em>, <em>fmax</em>, <em>f0</em>, <em>funct</em>, <em>norm=None</em>, <em>vary_fmax=False</em>, <em>vary_density=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/calc_moments.html#calculate_moment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.calc_moments.calculate_moment" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for calculating one of the integrals used to construct a template
bank placement metric. The integral calculated will be</p>
<p>int funct(x) * (psd_x)**(-7./3.) * delta_x / PSD(x)</p>
<p>where x = f / f0. The lower frequency cutoff is given by fmin, see
the parameters below for details on how the upper frequency cutoff is
chosen</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>psd_f</strong> (<em>numpy.array</em>) – numpy array holding the set of evenly spaced frequencies used in the PSD</li>
<li><strong>psd_amp</strong> (<em>numpy.array</em>) – numpy array holding the PSD values corresponding to the psd_f
frequencies</li>
<li><strong>fmin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The lower frequency cutoff used in the calculation of the integrals
used to obtain the metric.</li>
<li><strong>fmax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The upper frequency cutoff used in the calculation of the integrals
used to obtain the metric. This can be varied (see the vary_fmax
option below).</li>
<li><strong>f0</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – This is an arbitrary scaling factor introduced to avoid the potential
for numerical overflow when calculating this. Generally the default
value (70) is safe here. <strong>IMPORTANT, if you want to calculate the
ethinca metric components later this MUST be set equal to f_low.</strong></li>
<li><strong>funct</strong> (<em>Lambda function</em>) – The function to use when computing the integral as described above.</li>
<li><strong>norm</strong> (<em>Dictionary of floats</em>) – If given then moment[f_cutoff] will be divided by norm[f_cutoff]</li>
<li><strong>vary_fmax</strong> (<em>boolean</em><em>, </em><em>optional</em><em> (</em><em>default False</em><em>)</em>) – If set to False the metric and rotations are calculated once, for the
full range of frequency [f_low,f_upper).
If set to True the metric and rotations are calculated multiple times,
for frequency ranges [f_low,f_low + i*vary_density), where i starts at
1 and runs up until f_low + (i+1)*vary_density &gt; f_upper.
Thus values greater than f_upper are <em>not</em> computed.
The calculation for the full range [f_low,f_upper) is also done.</li>
<li><strong>vary_density</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – If vary_fmax is True, this will be used in computing the frequency
ranges as described for vary_fmax.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>moment</strong> – moment[f_cutoff] will store the value of the moment at the frequency
cutoff given by f_cutoff.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Dictionary of floats</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.calc_moments.determine_eigen_directions">
<code class="descclassname">pycbc.tmpltbank.calc_moments.</code><code class="descname">determine_eigen_directions</code><span class="sig-paren">(</span><em>metricParams</em>, <em>preserveMoments=False</em>, <em>vary_fmax=False</em>, <em>vary_density=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/calc_moments.html#determine_eigen_directions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.calc_moments.determine_eigen_directions" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will calculate the coordinate transfomations that are needed
to rotate from a coordinate system described by the various Lambda
components in the frequency expansion, to a coordinate system where the
metric is Cartesian.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric.</li>
<li><strong>preserveMoments</strong> (<em>boolean</em><em>, </em><em>optional</em><em> (</em><em>default False</em><em>)</em>) – Currently only used for debugging.
If this is given then if the moments structure is already set
within metricParams then they will not be recalculated.</li>
<li><strong>vary_fmax</strong> (<em>boolean</em><em>, </em><em>optional</em><em> (</em><em>default False</em><em>)</em>) – If set to False the metric and rotations are calculated once, for the
full range of frequency [f_low,f_upper).
If set to True the metric and rotations are calculated multiple times,
for frequency ranges [f_low,f_low + i*vary_density), where i starts at
1 and runs up until f_low + (i+1)*vary_density &gt; f_upper.
Thus values greater than f_upper are <em>not</em> computed.
The calculation for the full range [f_low,f_upper) is also done.</li>
<li><strong>vary_density</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – If vary_fmax is True, this will be used in computing the frequency
ranges as described for vary_fmax.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric.
<strong>THIS FUNCTION ONLY RETURNS THE CLASS</strong>
The following will be <strong>added</strong> to this structure</li>
<li><strong>metricParams.evals</strong> (<em>Dictionary of numpy.array</em>) – Each entry in the dictionary corresponds to the different frequency
ranges described in vary_fmax. If vary_fmax = False, the only entry
will be f_upper, this corresponds to integrals in [f_low,f_upper). This
entry is always present. Each other entry will use floats as keys to
the dictionary. These floats give the upper frequency cutoff when it is
varying.
Each numpy.array contains the eigenvalues which, with the eigenvectors
in evecs, are needed to rotate the
coordinate system to one in which the metric is the identity matrix.</li>
<li><strong>metricParams.evecs</strong> (<em>Dictionary of numpy.matrix</em>) – Each entry in the dictionary is as described under evals.
Each numpy.matrix contains the eigenvectors which, with the eigenvalues
in evals, are needed to rotate the
coordinate system to one in which the metric is the identity matrix.</li>
<li><strong>metricParams.metric</strong> (<em>Dictionary of numpy.matrix</em>) – Each entry in the dictionary is as described under evals.
Each numpy.matrix contains the metric of the parameter space in the
Lambda_i coordinate system.</li>
<li><strong>metricParams.moments</strong> (<em>Moments structure</em>) – See the structure documentation for a description of this. This
contains the result of all the integrals used in computing the metrics
above. It can be used for the ethinca components calculation, or other
similar calculations.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.calc_moments.get_moments">
<code class="descclassname">pycbc.tmpltbank.calc_moments.</code><code class="descname">get_moments</code><span class="sig-paren">(</span><em>metricParams</em>, <em>vary_fmax=False</em>, <em>vary_density=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/calc_moments.html#get_moments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.calc_moments.get_moments" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will calculate the various integrals (moments) that are
needed to compute the metric used in template bank placement and
coincidence.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric.</li>
<li><strong>vary_fmax</strong> (<em>boolean</em><em>, </em><em>optional</em><em> (</em><em>default False</em><em>)</em>) – If set to False the metric and rotations are calculated once, for the
full range of frequency [f_low,f_upper).
If set to True the metric and rotations are calculated multiple times,
for frequency ranges [f_low,f_low + i*vary_density), where i starts at
1 and runs up until f_low + (i+1)*vary_density &gt; f_upper.
Thus values greater than f_upper are <em>not</em> computed.
The calculation for the full range [f_low,f_upper) is also done.</li>
<li><strong>vary_density</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – If vary_fmax is True, this will be used in computing the frequency
ranges as described for vary_fmax.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><p class="first"><strong>None</strong> (<em>None</em>) – <strong>THIS FUNCTION RETURNS NOTHING</strong>
The following will be <strong>added</strong> to the metricParams structure</p>
</li>
<li><p class="first"><strong>metricParams.moments</strong> (<em>Moments structure</em>) – This contains the result of all the integrals used in computing the
metrics above. It can be used for the ethinca components calculation,
or other similar calculations. This is composed of two compound
dictionaries. The first entry indicates which moment is being
calculated and the second entry indicates the upper frequency cutoff
that was used.</p>
<p>In all cases x = f/f0.</p>
<p>For the first entries the options are:</p>
<p>moments[‘J%d’ %(i)][f_cutoff]
This stores the integral of
x**((-i)/3.) * delta X / PSD(x)</p>
<p>moments[‘log%d’ %(i)][f_cutoff]
This stores the integral of
(numpy.log(x**(1./3.))) x**((-i)/3.) * delta X / PSD(x)</p>
<p>moments[‘loglog%d’ %(i)][f_cutoff]
This stores the integral of
(numpy.log(x**(1./3.)))**2 x**((-i)/3.) * delta X / PSD(x)</p>
<p>moments[‘loglog%d’ %(i)][f_cutoff]
This stores the integral of
(numpy.log(x**(1./3.)))**3 x**((-i)/3.) * delta X / PSD(x)</p>
<p>moments[‘loglog%d’ %(i)][f_cutoff]
This stores the integral of
(numpy.log(x**(1./3.)))**4 x**((-i)/3.) * delta X / PSD(x)</p>
<p>The second entry stores the frequency cutoff used when computing
the integral. See description of the vary_fmax option above.</p>
<p>All of these values are nomralized by a factor of</p>
<p>x**((-7)/3.) * delta X / PSD(x)</p>
<p>The normalization factor can be obtained in</p>
<p>moments[‘I7’][f_cutoff]</p>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.calc_moments.interpolate_psd">
<code class="descclassname">pycbc.tmpltbank.calc_moments.</code><code class="descname">interpolate_psd</code><span class="sig-paren">(</span><em>psd_f</em>, <em>psd_amp</em>, <em>deltaF</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/calc_moments.html#interpolate_psd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.calc_moments.interpolate_psd" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to interpolate a PSD to a different value of deltaF. Uses linear
interpolation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>psd_f</strong> (<em>numpy.array</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em> or </em><em>similar</em>) – List of the frequencies contained within the PSD.</li>
<li><strong>psd_amp</strong> (<em>numpy.array</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em> or </em><em>similar</em>) – List of the PSD values at the frequencies in psd_f.</li>
<li><strong>deltaF</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Value of deltaF to interpolate the PSD to.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>new_psd_f</strong> (<em>numpy.array</em>) – Array of the frequencies contained within the interpolated PSD</li>
<li><strong>new_psd_amp</strong> (<em>numpy.array</em>) – Array of the interpolated PSD values at the frequencies in new_psd_f.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-pycbc.tmpltbank.coord_utils">
<span id="pycbc-tmpltbank-coord-utils-module"></span><h2>pycbc.tmpltbank.coord_utils module<a class="headerlink" href="#module-pycbc.tmpltbank.coord_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.calc_point_dist">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">calc_point_dist</code><span class="sig-paren">(</span><em>vsA</em>, <em>entryA</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#calc_point_dist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.calc_point_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used to determine the distance between two points.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>vsA</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em> or </em><em>numpy.array</em><em> or </em><em>similar</em>) – An array of point 1’s position in the chi_i coordinate system</li>
<li><strong>entryA</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em> or </em><em>numpy.array</em><em> or </em><em>similar</em>) – An array of point 2’s position in the chi_i coordinate system</li>
<li><strong>MMdistA</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The minimal mismatch allowed between the points</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>val</strong> – The metric distance between the two points.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.calc_point_dist_vary">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">calc_point_dist_vary</code><span class="sig-paren">(</span><em>mus1</em>, <em>fUpper1</em>, <em>mus2</em>, <em>fUpper2</em>, <em>fMap</em>, <em>norm_map</em>, <em>MMdistA</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#calc_point_dist_vary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.calc_point_dist_vary" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to determine if two points, with differing upper frequency cutoffs
have a mismatch &lt; MMdistA for <em>both</em> upper frequency cutoffs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mus1</strong> (<em>List of numpy arrays</em>) – mus1[i] will give the array of point 1’s position in the chi_j
coordinate system. The i element corresponds to varying values of the
upper frequency cutoff. fMap is used to map between i and actual
frequencies</li>
<li><strong>fUpper1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The upper frequency cutoff of point 1.</li>
<li><strong>mus2</strong> (<em>List of numpy arrays</em>) – mus2[i] will give the array of point 2’s position in the chi_j
coordinate system. The i element corresponds to varying values of the
upper frequency cutoff. fMap is used to map between i and actual
frequencies</li>
<li><strong>fUpper2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The upper frequency cutoff of point 2.</li>
<li><strong>fMap</strong> (<em>dictionary</em>) – fMap[fUpper] will give the index needed to get the chi_j coordinates
in the two sets of mus</li>
<li><strong>norm_map</strong> (<em>dictionary</em>) – norm_map[fUpper] will give the relative frequency domain template
amplitude (sigma) at the given value of fUpper.</li>
<li><strong>MMdistA</strong> – The minimal mismatch allowed between the points</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True if the points have a mismatch &lt; MMdistA
False if the points have a mismatch &gt; MMdistA</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.estimate_mass_range">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">estimate_mass_range</code><span class="sig-paren">(</span><em>numPoints</em>, <em>massRangeParams</em>, <em>metricParams</em>, <em>fUpper</em>, <em>covary=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#estimate_mass_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.estimate_mass_range" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will generate a large set of points with random masses and
spins (using pycbc.tmpltbank.get_random_mass) and translate these points
into the xi_i coordinate system for the given upper frequency cutoff.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>numPoints</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Number of systems to simulate</li>
<li><strong>massRangeParams</strong> (<em>massRangeParameters instance</em>) – Instance holding all the details of mass ranges and spin ranges.</li>
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric
and the eigenvalues, eigenvectors and covariance matrix
needed to manipulate the space.</li>
<li><strong>fUpper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The value of fUpper to use when getting the mu coordinates from the
lambda coordinates. This must be a key in metricParams.evals and
metricParams.evecs (ie. we must know how to do the transformation for
the given value of fUpper). It also must be a key in
metricParams.evecsCV if covary=True.</li>
<li><strong>covary</strong> (<em>boolean</em><em>, </em><em>optional</em><em> (</em><em>default = True</em><em>)</em>) – If this is given then evecsCV will be used to rotate from the Cartesian
coordinate system into the principal coordinate direction (xi_i). If
not given then points in the original Cartesian coordinates are
returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>xis</strong> – A list of the positions of each point in the xi_i coordinate system.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.find_closest_calculated_frequencies">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">find_closest_calculated_frequencies</code><span class="sig-paren">(</span><em>input_freqs</em>, <em>metric_freqs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#find_closest_calculated_frequencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.find_closest_calculated_frequencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a value (or array) of input frequencies find the closest values in
the list of frequencies calculated in the metric.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>input_freqs</strong> (<em>numpy.array</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The frequency(ies) that you want to find the closest value in
metric_freqs</li>
<li><strong>metric_freqs</strong> (<em>numpy.array</em>) – The list of frequencies calculated by the metric</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>output_freqs</strong> – The list of closest values to input_freqs for which the metric was
computed</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.array or <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.find_max_and_min_frequencies">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">find_max_and_min_frequencies</code><span class="sig-paren">(</span><em>name</em>, <em>mass_range_params</em>, <em>freqs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#find_max_and_min_frequencies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.find_max_and_min_frequencies" title="Permalink to this definition">¶</a></dt>
<dd><p>ADD DOCS</p>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.get_conv_params">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">get_conv_params</code><span class="sig-paren">(</span><em>mass1</em>, <em>mass2</em>, <em>spin1z</em>, <em>spin2z</em>, <em>metricParams</em>, <em>fUpper</em>, <em>lambda1=None</em>, <em>lambda2=None</em>, <em>quadparam1=None</em>, <em>quadparam2=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#get_conv_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.get_conv_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to convert between masses and spins and locations in the mu
parameter space. Mu = Cartesian metric, but not principal components.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mass1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Mass of heavier body.</li>
<li><strong>mass2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Mass of lighter body.</li>
<li><strong>spin1z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Spin of body 1.</li>
<li><strong>spin2z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Spin of body 2.</li>
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric
and the eigenvalues, eigenvectors and covariance matrix
needed to manipulate the space.</li>
<li><strong>fUpper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The value of fUpper to use when getting the mu coordinates from the
lambda coordinates. This must be a key in metricParams.evals and
metricParams.evecs (ie. we must know how to do the transformation for
the given value of fUpper)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>mus</strong> – Position of the system(s) in the mu coordinate system</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of floats or numpy.arrays</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.get_cov_params">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">get_cov_params</code><span class="sig-paren">(</span><em>mass1</em>, <em>mass2</em>, <em>spin1z</em>, <em>spin2z</em>, <em>metricParams</em>, <em>fUpper</em>, <em>lambda1=None</em>, <em>lambda2=None</em>, <em>quadparam1=None</em>, <em>quadparam2=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#get_cov_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.get_cov_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to convert between masses and spins and locations in the xi
parameter space. Xi = Cartesian metric and rotated to principal components.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mass1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Mass of heavier body.</li>
<li><strong>mass2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Mass of lighter body.</li>
<li><strong>spin1z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Spin of body 1.</li>
<li><strong>spin2z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Spin of body 2.</li>
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric
and the eigenvalues, eigenvectors and covariance matrix
needed to manipulate the space.</li>
<li><strong>fUpper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The value of fUpper to use when getting the mu coordinates from the
lambda coordinates. This must be a key in metricParams.evals,
metricParams.evecs and metricParams.evecsCV
(ie. we must know how to do the transformation for
the given value of fUpper)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>xis</strong> – Position of the system(s) in the xi coordinate system</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of floats or numpy.arrays</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.get_covaried_params">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">get_covaried_params</code><span class="sig-paren">(</span><em>mus</em>, <em>evecsCV</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#get_covaried_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.get_covaried_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to rotate from position(s) in the mu_i coordinate system into the
position(s) in the xi_i coordinate system</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mus</strong> (<em>list of floats</em><em> or </em><em>numpy.arrays</em>) – Position of the system(s) in the mu coordinate system</li>
<li><strong>evecsCV</strong> (<em>numpy.matrix</em>) – This matrix is used to perform the rotation to the xi_i
coordinate system.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>xis</strong> – Position of the system(s) in the xi coordinate system</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of floats or numpy.arrays</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.get_mu_params">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">get_mu_params</code><span class="sig-paren">(</span><em>lambdas</em>, <em>metricParams</em>, <em>fUpper</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#get_mu_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.get_mu_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to rotate from the lambda coefficients into position in the mu
coordinate system. Mu = Cartesian metric, but not principal components.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>lambdas</strong> (<em>list of floats</em><em> or </em><em>numpy.arrays</em>) – Position of the system(s) in the lambda coefficients</li>
<li><strong>metricParams</strong> (<em>metricParameters instance</em>) – Structure holding all the options for construction of the metric
and the eigenvalues, eigenvectors and covariance matrix
needed to manipulate the space.</li>
<li><strong>fUpper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The value of fUpper to use when getting the mu coordinates from the
lambda coordinates. This must be a key in metricParams.evals and
metricParams.evecs (ie. we must know how to do the transformation for
the given value of fUpper)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>mus</strong> – Position of the system(s) in the mu coordinate system</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of floats or numpy.arrays</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.get_point_distance">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">get_point_distance</code><span class="sig-paren">(</span><em>point1</em>, <em>point2</em>, <em>metricParams</em>, <em>fUpper</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#get_point_distance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.get_point_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to calculate the mismatch between two points, supplied in terms
of the masses and spins, using the xi_i parameter space metric to
approximate the mismatch of the two points. Can also take one of the points
as an array of points and return an array of mismatches (but only one can
be an array!)</p>
<dl class="docutils">
<dt>point1 <span class="classifier-delimiter">:</span> <span class="classifier">List of floats or numpy.arrays</span></dt>
<dd>point1[0] contains the mass(es) of the heaviest body(ies).
point1[1] contains the mass(es) of the smallest body(ies).
point1[2] contains the spin(es) of the heaviest body(ies).
point1[3] contains the spin(es) of the smallest body(ies).</dd>
<dt>point2 <span class="classifier-delimiter">:</span> <span class="classifier">List of floats</span></dt>
<dd>point2[0] contains the mass of the heaviest body.
point2[1] contains the mass of the smallest body.
point2[2] contains the spin of the heaviest body.
point2[3] contains the spin of the smallest body.</dd>
<dt>metricParams <span class="classifier-delimiter">:</span> <span class="classifier">metricParameters instance</span></dt>
<dd>Structure holding all the options for construction of the metric
and the eigenvalues, eigenvectors and covariance matrix
needed to manipulate the space.</dd>
<dt>fUpper <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The value of fUpper to use when getting the mu coordinates from the
lambda coordinates. This must be a key in metricParams.evals,
metricParams.evecs and metricParams.evecsCV
(ie. we must know how to do the transformation for
the given value of fUpper)</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>dist</strong> (<em>float or numpy.array</em>) – Distance between the point2 and all points in point1</li>
<li><strong>xis1</strong> (<em>List of floats or numpy.arrays</em>) – Position of the input point1(s) in the xi_i parameter space</li>
<li><strong>xis2</strong> (<em>List of floats</em>) – Position of the input point2 in the xi_i parameter space</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.get_random_mass">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">get_random_mass</code><span class="sig-paren">(</span><em>numPoints</em>, <em>massRangeParams</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#get_random_mass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.get_random_mass" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will generate a large set of points within the chosen mass
and spin space, and with the desired minimum remnant disk mass (this applies
to NS-BH systems only). It will also return the corresponding PN spin
coefficients for ease of use later (though these may be removed at some
future point).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>numPoints</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Number of systems to simulate</li>
<li><strong>massRangeParams</strong> (<em>massRangeParameters instance</em>) – Instance holding all the details of mass ranges and spin ranges.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>mass1</strong> (<em>float</em>) – Mass of heavier body.</li>
<li><strong>mass2</strong> (<em>float</em>) – Mass of lighter body.</li>
<li><strong>spin1z</strong> (<em>float</em>) – Spin of body 1.</li>
<li><strong>spin2z</strong> (<em>float</em>) – Spin of body 2.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.get_random_mass_point_particles">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">get_random_mass_point_particles</code><span class="sig-paren">(</span><em>numPoints</em>, <em>massRangeParams</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#get_random_mass_point_particles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.get_random_mass_point_particles" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will generate a large set of points within the chosen mass
and spin space. It will also return the corresponding PN spin coefficients
for ease of use later (though these may be removed at some future point).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>numPoints</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Number of systems to simulate</li>
<li><strong>massRangeParams</strong> (<em>massRangeParameters instance</em>) – Instance holding all the details of mass ranges and spin ranges.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>mass1</strong> (<em>float</em>) – Mass of heavier body.</li>
<li><strong>mass2</strong> (<em>float</em>) – Mass of lighter body.</li>
<li><strong>spin1z</strong> (<em>float</em>) – Spin of body 1.</li>
<li><strong>spin2z</strong> (<em>float</em>) – Spin of body 2.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.outspiral_loop">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">outspiral_loop</code><span class="sig-paren">(</span><em>N</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#outspiral_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.outspiral_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of points that will loop outwards in a 2D lattice in terms
of distance from a central point. So if N=2 this will be [0,0], [0,1],
[0,-1],[1,0],[-1,0],[1,1] …. This is useful when you want to loop over
a number of bins, but want to start in the center and work outwards.</p>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.return_nearest_cutoff">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">return_nearest_cutoff</code><span class="sig-paren">(</span><em>name</em>, <em>mass_dict</em>, <em>freqs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#return_nearest_cutoff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.return_nearest_cutoff" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an array of total mass values and an (ascending) list of
frequencies, this will calculate the specified cutoff formula for each
mtotal and return the nearest frequency to each cutoff from the input
list.
Currently only supports cutoffs that are functions of the total mass
and no other parameters (SchwarzISCO, LightRing, ERD)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<em>string</em>) – Name of the cutoff formula to be approximated</li>
<li><strong>mass_dict</strong> (<em>Dictionary where the keys are used to call the functions</em>) – returned by tmpltbank.named_frequency_cutoffs. The values can be
numpy arrays or single values.</li>
<li><strong>freqs</strong> (<em>list of floats</em>) – A list of frequencies (must be sorted ascending)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The frequencies closest to the cutoff for each value of totmass.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.rotate_vector">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">rotate_vector</code><span class="sig-paren">(</span><em>evecs</em>, <em>old_vector</em>, <em>rescale_factor</em>, <em>index</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#rotate_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.rotate_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to find the position of the system(s) in one of the xi_i or mu_i
directions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>evecs</strong> (<em>numpy.matrix</em>) – Matrix of the eigenvectors of the metric in lambda_i coordinates. Used
to rotate to a Cartesian coordinate system.</li>
<li><strong>old_vector</strong> (<em>list of floats</em><em> or </em><em>numpy.arrays</em>) – The position of the system(s) in the original coordinates</li>
<li><strong>rescale_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Scaling factor to apply to resulting position(s)</li>
<li><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The index of the final coordinate system that is being computed. Ie.
if we are going from mu_i -&gt; xi_j, this will give j.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>positions</strong> – Position of the point(s) in the resulting coordinate.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a> or numpy.array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.coord_utils.test_point_dist">
<code class="descclassname">pycbc.tmpltbank.coord_utils.</code><code class="descname">test_point_dist</code><span class="sig-paren">(</span><em>point_1_chis</em>, <em>point_2_chis</em>, <em>distance_threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/coord_utils.html#test_point_dist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.coord_utils.test_point_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>This function tests if the difference between two points in the chi
parameter space is less than a distance threshold. Returns True if it is
and False if it is not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>point_1_chis</strong> (<em>numpy.array</em>) – An array of point 1’s position in the chi_i coordinate system</li>
<li><strong>point_2_chis</strong> (<em>numpy.array</em>) – An array of point 2’s position in the chi_i coordinate system</li>
<li><strong>distance_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The distance threshold to use.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-pycbc.tmpltbank.em_progenitors">
<span id="pycbc-tmpltbank-em-progenitors-module"></span><h2>pycbc.tmpltbank.em_progenitors module<a class="headerlink" href="#module-pycbc.tmpltbank.em_progenitors" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pycbc.tmpltbank.em_progenitors.ISCO_eq">
<code class="descclassname">pycbc.tmpltbank.em_progenitors.</code><code class="descname">ISCO_eq</code><span class="sig-paren">(</span><em>r</em>, <em>chi</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/em_progenitors.html#ISCO_eq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.em_progenitors.ISCO_eq" title="Permalink to this definition">¶</a></dt>
<dd><p>Polynomial that enables the calculation of the Kerr
inntermost stable circular orbit (ISCO) radius via its
roots.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>r</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – the radial coordinate in BH mass units</li>
<li><strong>chi</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – the BH dimensionless spin parameter</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">(r*(r-6))**2-chi**2*(2*r*(3*r+14)-9*chi**2)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.em_progenitors.ISSO_eq_at_pole">
<code class="descclassname">pycbc.tmpltbank.em_progenitors.</code><code class="descname">ISSO_eq_at_pole</code><span class="sig-paren">(</span><em>r</em>, <em>chi</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/em_progenitors.html#ISSO_eq_at_pole"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.em_progenitors.ISSO_eq_at_pole" title="Permalink to this definition">¶</a></dt>
<dd><p>Polynomial that enables the calculation of the Kerr polar
(inclination = +/- pi/2) innermost stable spherical orbit
(ISSO) radius via its roots.  Physical solutions are
between 6 and 1+sqrt[3]+sqrt[3+2sqrt[3]].</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>r</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – the radial coordinate in BH mass units</li>
<li><strong>chi</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – the BH dimensionless spin parameter</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">r**3*(r**2*(r-6)+chi**2*(3*r+4))+chi**4*(3*r*(r-2)+chi**2)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.em_progenitors.PG_ISSO_eq">
<code class="descclassname">pycbc.tmpltbank.em_progenitors.</code><code class="descname">PG_ISSO_eq</code><span class="sig-paren">(</span><em>r</em>, <em>chi</em>, <em>incl</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/em_progenitors.html#PG_ISSO_eq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.em_progenitors.PG_ISSO_eq" title="Permalink to this definition">¶</a></dt>
<dd><p>Polynomial that enables the calculation of a generic innermost
stable spherical orbit (ISSO) radius via its roots.  Physical
solutions are between the equatorial ISSO (aka the ISCO) radius
and the polar ISSO radius.
[See Stone, Loeb, Berger, PRD 87, 084053 (2013)]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>r</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – the radial coordinate in BH mass units</li>
<li><strong>chi</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – the BH dimensionless spin parameter</li>
<li><strong>incl</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – inclination angle between the BH spin and the orbital angular
momentum in radians</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>r**8*Z+chi**2*(1-cos_incl**2)*(chi**2*(1-cos_incl**2)*Y-2*r**4*X)
where
X=chi**2*(chi**2*(3*chi**2+4*r*(2*r-3))+r**2*(15*r*(r-4)+28))-</p>
<blockquote>
<div><p>6*r**4*(r**2-4)</p>
</div></blockquote>
<dl class="docutils">
<dt>Y=chi**4*(chi**4+r**2*(7*r*(3*r-4)+36))+6*r*(r-2)*(chi**6+2*r**3*</dt>
<dd><p class="first last">(chi**2*(3*r+2)+3*r**2*(r-2)))</p>
</dd>
</dl>
<p>Z=ISCO_eq(r,chi)</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.em_progenitors.PG_ISSO_solver">
<code class="descclassname">pycbc.tmpltbank.em_progenitors.</code><code class="descname">PG_ISSO_solver</code><span class="sig-paren">(</span><em>chi</em>, <em>incl</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/em_progenitors.html#PG_ISSO_solver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.em_progenitors.PG_ISSO_solver" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that determines the radius of the innermost stable
spherical orbit (ISSO) for a Kerr BH and a generic inclination
angle between the BH spin and the orbital angular momentum.
This function finds the appropriat root of PG_ISSO_eq.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>chi</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – the BH dimensionless spin parameter</li>
<li><strong>incl</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – the inclination angle between the BH spin and the orbital
angular momentum in radians</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>solution</strong> – the radius of the orbit in BH mass units</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.em_progenitors.load_ns_sequence">
<code class="descclassname">pycbc.tmpltbank.em_progenitors.</code><code class="descname">load_ns_sequence</code><span class="sig-paren">(</span><em>eos_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/em_progenitors.html#load_ns_sequence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.em_progenitors.load_ns_sequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the data of an NS non-rotating equilibrium sequence
generated using the equation of state (EOS) chosen by the
user.  [Only the 2H 2-piecewise polytropic EOS is currently
supported.  This yields NSs with large radiss (15-16km).]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>eos_name</strong> (<em>string</em>) – NS equation of state label (‘2H’ is the only supported
choice at the moment)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul>
<li><strong>ns_sequence</strong> (<em>3D-array</em>) –<dl class="docutils">
<dt>contains the sequence data in the form NS gravitational</dt>
<dd>mass (in solar masses), NS baryonic mass (in solar
masses), NS compactness (dimensionless)</dd>
</dl>
</li>
<li><strong>max_ns_g_mass</strong> (<em>float</em>) – the maximum NS gravitational mass (in solar masses) in
the sequence (this is the mass of the most massive stable
NS)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.em_progenitors.ns_g_mass_to_ns_b_mass">
<code class="descclassname">pycbc.tmpltbank.em_progenitors.</code><code class="descname">ns_g_mass_to_ns_b_mass</code><span class="sig-paren">(</span><em>ns_g_mass</em>, <em>ns_sequence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/em_progenitors.html#ns_g_mass_to_ns_b_mass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.em_progenitors.ns_g_mass_to_ns_b_mass" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines the baryonic mass of an NS given its gravitational
mass and an NS equilibrium sequence.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ns_g_mass</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – NS gravitational mass (in solar masses)</li>
<li><strong>ns_sequence</strong> (<em>3D-array</em>) – <dl class="docutils">
<dt>contains the sequence data in the form NS gravitational</dt>
<dd>mass (in solar masses), NS baryonic mass (in solar
masses), NS compactness (dimensionless)</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The NS baryonic mass (in solar massesr**3*(r**2*(r-6)+chi**2*(3*r+4))+
chi**4*(3*r*(r-2)+chi**2))</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.em_progenitors.ns_g_mass_to_ns_compactness">
<code class="descclassname">pycbc.tmpltbank.em_progenitors.</code><code class="descname">ns_g_mass_to_ns_compactness</code><span class="sig-paren">(</span><em>ns_g_mass</em>, <em>ns_sequence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/em_progenitors.html#ns_g_mass_to_ns_compactness"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.em_progenitors.ns_g_mass_to_ns_compactness" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines the compactness of an NS given its
gravitational mass and an NS equilibrium sequence.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ns_g_mass</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – NS gravitational mass (in solar masses)</li>
<li><strong>ns_sequence</strong> (<em>3D-array</em>) – <dl class="docutils">
<dt>contains the sequence data in the form NS gravitational</dt>
<dd>mass (in solar masses), NS baryonic mass (in solar
masses), NS compactness (dimensionless)</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The NS compactness (dimensionless)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.em_progenitors.remnant_mass">
<code class="descclassname">pycbc.tmpltbank.em_progenitors.</code><code class="descname">remnant_mass</code><span class="sig-paren">(</span><em>eta</em>, <em>ns_g_mass</em>, <em>ns_sequence</em>, <em>chi</em>, <em>incl</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/em_progenitors.html#remnant_mass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.em_progenitors.remnant_mass" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that determines the remnant disk mass of
an NS-BH system using the fit to numerical-relativity
results discussed in Foucart, Hinderer, Nissanke PRD 98, 081501(R) (2018).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – the symmetric mass ratio of the binary</li>
<li><strong>ns_g_mass</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – NS gravitational mass (in solar masses)</li>
<li><strong>ns_sequence</strong> (<em>3D-array</em>) – <dl class="docutils">
<dt>contains the sequence data in the form NS gravitational</dt>
<dd>mass (in solar masses), NS baryonic mass (in solar
masses), NS compactness (dimensionless)</dd>
</dl>
</li>
<li><strong>chi</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – the BH dimensionless spin parameter</li>
<li><strong>incl</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – the inclination angle between the BH spin and the orbital
angular momentum in radians</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>remnant_mass</strong> – The remnant mass in solar masses</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-pycbc.tmpltbank.lambda_mapping">
<span id="pycbc-tmpltbank-lambda-mapping-module"></span><h2>pycbc.tmpltbank.lambda_mapping module<a class="headerlink" href="#module-pycbc.tmpltbank.lambda_mapping" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pycbc.tmpltbank.lambda_mapping.ethinca_order_from_string">
<code class="descclassname">pycbc.tmpltbank.lambda_mapping.</code><code class="descname">ethinca_order_from_string</code><span class="sig-paren">(</span><em>order</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/lambda_mapping.html#ethinca_order_from_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.lambda_mapping.ethinca_order_from_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the integer giving twice the post-Newtonian order
used by the ethinca calculation. Currently valid only for TaylorF2 metric</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>order</strong> (<em>string</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.lambda_mapping.generate_inverse_mapping">
<code class="descclassname">pycbc.tmpltbank.lambda_mapping.</code><code class="descname">generate_inverse_mapping</code><span class="sig-paren">(</span><em>order</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/lambda_mapping.html#generate_inverse_mapping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.lambda_mapping.generate_inverse_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Genereate a lambda entry -&gt; PN order map.</p>
<p>This function will generate the opposite of generate mapping. So where
generate_mapping gives dict[key] = item this will give
dict[item] = key. Valid PN orders are:</p>
<blockquote>
<div><ul class="simple">
<li>zeroPN: Will only include the dominant term (proportional to chirp mass)</li>
<li>onePN: Will only the leading orbit term and first correction at 1PN</li>
<li>onePointFivePN: Will include orbit and spin terms to 1.5PN.</li>
<li>twoPN: Will include orbit and spin terms to 2PN.</li>
<li>twoPointFivePN: Will include orbit and spin terms to 2.5PN.</li>
<li>threePN: Will include orbit terms to 3PN and spin terms to 2.5PN.</li>
<li>threePointFivePN: Include orbit terms to 3.5PN and spin terms to 2.5PN</li>
</ul>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>order</strong> (<em>string</em>) – A string containing a PN order. Valid values are given above.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>mapping</strong> – An inverse mapping between the active Lambda terms and index in the
metric</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dictionary</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.lambda_mapping.generate_mapping">
<code class="descclassname">pycbc.tmpltbank.lambda_mapping.</code><code class="descname">generate_mapping</code><span class="sig-paren">(</span><em>order</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/lambda_mapping.html#generate_mapping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.lambda_mapping.generate_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will take an order string and return a mapping between
components in the metric and the various Lambda components. This must be
used (and consistently used) when generating the metric <em>and</em> when
transforming to/from the xi_i coordinates to the lambda_i coordinates.</p>
<p>NOTE: This is not a great way of doing this. It would be nice to clean
this up. Hence pulling this function out. The valid PN orders are</p>
<blockquote>
<div><ul class="simple">
<li>zeroPN: Will only include the dominant term (proportional to chirp mass)</li>
<li>onePN: Will only the leading orbit term and first correction at 1PN</li>
<li>onePointFivePN: Will include orbit and spin terms to 1.5PN.</li>
<li>twoPN: Will include orbit and spin terms to 2PN.</li>
<li>twoPointFivePN: Will include orbit and spin terms to 2.5PN.</li>
<li>threePN: Will include orbit terms to 3PN and spin terms to 2.5PN.</li>
<li>threePointFivePN: Include orbit terms to 3.5PN and spin terms to 2.5PN</li>
</ul>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>order</strong> (<em>string</em>) – A string containing a PN order. Valid values are given above.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>mapping</strong> – A mapping between the active Lambda terms and index in the metric</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dictionary</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.lambda_mapping.get_chirp_params">
<code class="descclassname">pycbc.tmpltbank.lambda_mapping.</code><code class="descname">get_chirp_params</code><span class="sig-paren">(</span><em>mass1</em>, <em>mass2</em>, <em>spin1z</em>, <em>spin2z</em>, <em>f0</em>, <em>order</em>, <em>quadparam1=None</em>, <em>quadparam2=None</em>, <em>lambda1=None</em>, <em>lambda2=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/lambda_mapping.html#get_chirp_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.lambda_mapping.get_chirp_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a set of masses and spins and convert to the various lambda
coordinates that describe the orbital phase. Accepted PN orders are:</p>
<blockquote>
<div><ul class="simple">
<li>zeroPN: Will only include the dominant term (proportional to chirp mass)</li>
<li>onePN: Will only the leading orbit term and first correction at 1PN</li>
<li>onePointFivePN: Will include orbit and spin terms to 1.5PN.</li>
<li>twoPN: Will include orbit and spin terms to 2PN.</li>
<li>twoPointFivePN: Will include orbit and spin terms to 2.5PN.</li>
<li>threePN: Will include orbit terms to 3PN and spin terms to 2.5PN.</li>
<li>threePointFivePN: Include orbit terms to 3.5PN and spin terms to 2.5PN</li>
</ul>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mass1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em> or </em><em>array</em>) – Mass1 of input(s).</li>
<li><strong>mass2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em> or </em><em>array</em>) – Mass2 of input(s).</li>
<li><strong>spin1z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em> or </em><em>array</em>) – Parallel spin component(s) of body 1.</li>
<li><strong>spin2z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em> or </em><em>array</em>) – Parallel spin component(s) of body 2.</li>
<li><strong>f0</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – This is an arbitrary scaling factor introduced to avoid the potential
for numerical overflow when calculating this. Generally the default
value (70) is safe here. <strong>IMPORTANT, if you want to calculate the
ethinca metric components later this MUST be set equal to f_low.</strong>
This value must also be used consistently (ie. don’t change its value
when calling different functions!).</li>
<li><strong>order</strong> (<em>string</em>) – The Post-Newtonian order that is used to translate from masses and
spins to the lambda_i coordinate system. Valid orders given above.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>lambdas</strong> – The lambda coordinates for the input system(s)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of floats or numpy.arrays</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.lambda_mapping.get_ethinca_orders">
<code class="descclassname">pycbc.tmpltbank.lambda_mapping.</code><code class="descname">get_ethinca_orders</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/lambda_mapping.html#get_ethinca_orders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.lambda_mapping.get_ethinca_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the dictionary mapping TaylorF2 PN order names to twice-PN
orders (powers of v/c)</p>
</dd></dl>

</div>
<div class="section" id="module-pycbc.tmpltbank.lattice_utils">
<span id="pycbc-tmpltbank-lattice-utils-module"></span><h2>pycbc.tmpltbank.lattice_utils module<a class="headerlink" href="#module-pycbc.tmpltbank.lattice_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pycbc.tmpltbank.lattice_utils.generate_anstar_3d_lattice">
<code class="descclassname">pycbc.tmpltbank.lattice_utils.</code><code class="descname">generate_anstar_3d_lattice</code><span class="sig-paren">(</span><em>maxv1</em>, <em>minv1</em>, <em>maxv2</em>, <em>minv2</em>, <em>maxv3</em>, <em>minv3</em>, <em>mindist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/lattice_utils.html#generate_anstar_3d_lattice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.lattice_utils.generate_anstar_3d_lattice" title="Permalink to this definition">¶</a></dt>
<dd><p>This function calls into LAL routines to generate a 3-dimensional array
of points using the An^* lattice.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>maxv1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Largest value in the 1st dimension to cover</li>
<li><strong>minv1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Smallest value in the 1st dimension to cover</li>
<li><strong>maxv2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Largest value in the 2nd dimension to cover</li>
<li><strong>minv2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Smallest value in the 2nd dimension to cover</li>
<li><strong>maxv3</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Largest value in the 3rd dimension to cover</li>
<li><strong>minv3</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Smallest value in the 3rd dimension to cover</li>
<li><strong>mindist</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Maximum allowed mismatch between a point in the parameter space and the
generated bank of points.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>v1s</strong> (<em>numpy.array</em>) – Array of positions in the first dimension</li>
<li><strong>v2s</strong> (<em>numpy.array</em>) – Array of positions in the second dimension</li>
<li><strong>v3s</strong> (<em>numpy.array</em>) – Array of positions in the second dimension</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.lattice_utils.generate_hexagonal_lattice">
<code class="descclassname">pycbc.tmpltbank.lattice_utils.</code><code class="descname">generate_hexagonal_lattice</code><span class="sig-paren">(</span><em>maxv1</em>, <em>minv1</em>, <em>maxv2</em>, <em>minv2</em>, <em>mindist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/lattice_utils.html#generate_hexagonal_lattice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.lattice_utils.generate_hexagonal_lattice" title="Permalink to this definition">¶</a></dt>
<dd><p>This function generates a 2-dimensional lattice of points using a hexagonal
lattice.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>maxv1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Largest value in the 1st dimension to cover</li>
<li><strong>minv1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Smallest value in the 1st dimension to cover</li>
<li><strong>maxv2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Largest value in the 2nd dimension to cover</li>
<li><strong>minv2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Smallest value in the 2nd dimension to cover</li>
<li><strong>mindist</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Maximum allowed mismatch between a point in the parameter space and the
generated bank of points.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>v1s</strong> (<em>numpy.array</em>) – Array of positions in the first dimension</li>
<li><strong>v2s</strong> (<em>numpy.array</em>) – Array of positions in the second dimension</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-pycbc.tmpltbank.option_utils">
<span id="pycbc-tmpltbank-option-utils-module"></span><h2>pycbc.tmpltbank.option_utils module<a class="headerlink" href="#module-pycbc.tmpltbank.option_utils" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pycbc.tmpltbank.option_utils.IndentedHelpFormatterWithNL">
<em class="property">class </em><code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">IndentedHelpFormatterWithNL</code><span class="sig-paren">(</span><em>prog</em>, <em>indent_increment=2</em>, <em>max_help_position=24</em>, <em>width=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#IndentedHelpFormatterWithNL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.IndentedHelpFormatterWithNL" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentDefaultsHelpFormatter" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentDefaultsHelpFormatter</span></code></a></p>
<p>This class taken from
<a class="reference external" href="https://groups.google.com/forum/#!topic/comp.lang.python/bfbmtUGhW8I">https://groups.google.com/forum/#!topic/comp.lang.python/bfbmtUGhW8I</a>
and is used to format the argparse help messages to deal with line breaking
nicer. Specfically the pn-order help is large and looks crappy without this.
This function is (C) Tim Chase</p>
<dl class="method">
<dt id="pycbc.tmpltbank.option_utils.IndentedHelpFormatterWithNL.format_description">
<code class="descname">format_description</code><span class="sig-paren">(</span><em>description</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#IndentedHelpFormatterWithNL.format_description"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.IndentedHelpFormatterWithNL.format_description" title="Permalink to this definition">¶</a></dt>
<dd><p>No documentation</p>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.option_utils.IndentedHelpFormatterWithNL.format_option">
<code class="descname">format_option</code><span class="sig-paren">(</span><em>option</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#IndentedHelpFormatterWithNL.format_option"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.IndentedHelpFormatterWithNL.format_option" title="Permalink to this definition">¶</a></dt>
<dd><p>No documentation</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.option_utils.check_ethinca_against_bank_params">
<code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">check_ethinca_against_bank_params</code><span class="sig-paren">(</span><em>ethincaParams</em>, <em>metricParams</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#check_ethinca_against_bank_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.check_ethinca_against_bank_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Cross-check the ethinca and bank layout metric calculation parameters
and set the ethinca metric PN order equal to the bank PN order if not
previously set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ethincaParams</strong> (<em>instance of ethincaParameters</em>) – </li>
<li><strong>metricParams</strong> (<em>instance of metricParameters</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="pycbc.tmpltbank.option_utils.ethincaParameters">
<em class="property">class </em><code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">ethincaParameters</code><span class="sig-paren">(</span><em>pnOrder</em>, <em>cutoff</em>, <em>freqStep</em>, <em>fLow=None</em>, <em>full_ethinca=False</em>, <em>time_ethinca=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#ethincaParameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.ethincaParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This class holds all of the options that are parsed in the function
insert_ethinca_metric_options
and all products produced using these options. It can also be initialized
from the __init__ function, providing directly the options normally
provided on the command line</p>
<dl class="classmethod">
<dt id="pycbc.tmpltbank.option_utils.ethincaParameters.from_argparse">
<em class="property">classmethod </em><code class="descname">from_argparse</code><span class="sig-paren">(</span><em>opts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#ethincaParameters.from_argparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.ethincaParameters.from_argparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an instance of the ethincaParameters class from an
argparse.OptionParser instance. This assumes that
insert_ethinca_metric_options
and
verify_ethinca_metric_options
have already been called before initializing the class.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.option_utils.get_options_from_group">
<code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">get_options_from_group</code><span class="sig-paren">(</span><em>option_group</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#get_options_from_group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.get_options_from_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Take an option group and return all the options that are defined in that
group.</p>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.option_utils.insert_base_bank_options">
<code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">insert_base_bank_options</code><span class="sig-paren">(</span><em>parser</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#insert_base_bank_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.insert_base_bank_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds essential common options for template bank generation to an
ArgumentParser instance.</p>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.option_utils.insert_ethinca_metric_options">
<code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">insert_ethinca_metric_options</code><span class="sig-paren">(</span><em>parser</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#insert_ethinca_metric_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.insert_ethinca_metric_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the options used to calculate the ethinca metric, if required.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>parser</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – OptionParser instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.option_utils.insert_mass_range_option_group">
<code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">insert_mass_range_option_group</code><span class="sig-paren">(</span><em>parser</em>, <em>nonSpin=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#insert_mass_range_option_group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.insert_mass_range_option_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the options used to specify mass ranges in the bank generation codes
to an argparser as an OptionGroup. This should be used if you
want to use these options in your code.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>parser</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – OptionParser instance.</li>
<li><strong>nonSpin</strong> (<em>boolean</em><em>, </em><em>optional</em><em> (</em><em>default=False</em><em>)</em>) – If this is provided the spin-related options will not be added.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.option_utils.insert_metric_calculation_options">
<code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">insert_metric_calculation_options</code><span class="sig-paren">(</span><em>parser</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#insert_metric_calculation_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.insert_metric_calculation_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the options used to obtain a metric in the bank generation codes to an
argparser as an OptionGroup. This should be used if you want to use these
options in your code.</p>
</dd></dl>

<dl class="class">
<dt id="pycbc.tmpltbank.option_utils.massRangeParameters">
<em class="property">class </em><code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">massRangeParameters</code><span class="sig-paren">(</span><em>minMass1</em>, <em>maxMass1</em>, <em>minMass2</em>, <em>maxMass2</em>, <em>maxNSSpinMag=0</em>, <em>maxBHSpinMag=0</em>, <em>maxTotMass=None</em>, <em>minTotMass=None</em>, <em>maxEta=None</em>, <em>minEta=0</em>, <em>max_chirp_mass=None</em>, <em>min_chirp_mass=None</em>, <em>ns_bh_boundary_mass=None</em>, <em>nsbhFlag=False</em>, <em>remnant_mass_threshold=None</em>, <em>ns_eos=None</em>, <em>use_eos_max_ns_mass=False</em>, <em>delta_bh_spin=None</em>, <em>delta_ns_mass=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#massRangeParameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.massRangeParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This class holds all of the options that are parsed in the function
insert_mass_range_option_group
and all products produced using these options. It can also be initialized
from the __init__ function providing directly the options normally
provided on the command line</p>
<dl class="attribute">
<dt id="pycbc.tmpltbank.option_utils.massRangeParameters.default_delta_bh_spin">
<code class="descname">default_delta_bh_spin</code><em class="property"> = 0.1</em><a class="headerlink" href="#pycbc.tmpltbank.option_utils.massRangeParameters.default_delta_bh_spin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pycbc.tmpltbank.option_utils.massRangeParameters.default_delta_ns_mass">
<code class="descname">default_delta_ns_mass</code><em class="property"> = 0.1</em><a class="headerlink" href="#pycbc.tmpltbank.option_utils.massRangeParameters.default_delta_ns_mass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pycbc.tmpltbank.option_utils.massRangeParameters.default_ns_eos">
<code class="descname">default_ns_eos</code><em class="property"> = '2H'</em><a class="headerlink" href="#pycbc.tmpltbank.option_utils.massRangeParameters.default_ns_eos" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pycbc.tmpltbank.option_utils.massRangeParameters.default_nsbh_boundary_mass">
<code class="descname">default_nsbh_boundary_mass</code><em class="property"> = 3.0</em><a class="headerlink" href="#pycbc.tmpltbank.option_utils.massRangeParameters.default_nsbh_boundary_mass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="pycbc.tmpltbank.option_utils.massRangeParameters.from_argparse">
<em class="property">classmethod </em><code class="descname">from_argparse</code><span class="sig-paren">(</span><em>opts</em>, <em>nonSpin=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#massRangeParameters.from_argparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.massRangeParameters.from_argparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an instance of the massRangeParameters class from an
argparse.OptionParser instance. This assumes that
insert_mass_range_option_group
and
verify_mass_range_options
have already been called before initializing the class.</p>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.option_utils.massRangeParameters.is_outside_range">
<code class="descname">is_outside_range</code><span class="sig-paren">(</span><em>mass1</em>, <em>mass2</em>, <em>spin1z</em>, <em>spin2z</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#massRangeParameters.is_outside_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.massRangeParameters.is_outside_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if a given location in mass1, mass2, spin1z, spin2z is within the
range of parameters allowed by the massParams object.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pycbc.tmpltbank.option_utils.metricParameters">
<em class="property">class </em><code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">metricParameters</code><span class="sig-paren">(</span><em>pnOrder</em>, <em>fLow</em>, <em>fUpper</em>, <em>deltaF</em>, <em>f0=70</em>, <em>write_metric=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#metricParameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.metricParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This class holds all of the options that are parsed in the function
insert_metric_calculation_options
and all products produced using these options. It can also be initialized
from the __init__ function, providing directly the options normally
provided on the command line.</p>
<dl class="attribute">
<dt id="pycbc.tmpltbank.option_utils.metricParameters.evals">
<code class="descname">evals</code><a class="headerlink" href="#pycbc.tmpltbank.option_utils.metricParameters.evals" title="Permalink to this definition">¶</a></dt>
<dd><p>The eigenvalues of the parameter space.
This is a Dictionary of numpy.array
Each entry in the dictionary corresponds to the different frequency
ranges described in vary_fmax. If vary_fmax = False, the only entry
will be f_upper, this corresponds to integrals in [f_low,f_upper). This
entry is always present. Each other entry will use floats as keys to
the dictionary. These floats give the upper frequency cutoff when it is
varying.
Each numpy.array contains the eigenvalues which, with the eigenvectors
in evecs, are needed to rotate the
coordinate system to one in which the metric is the identity matrix.</p>
</dd></dl>

<dl class="attribute">
<dt id="pycbc.tmpltbank.option_utils.metricParameters.evecs">
<code class="descname">evecs</code><a class="headerlink" href="#pycbc.tmpltbank.option_utils.metricParameters.evecs" title="Permalink to this definition">¶</a></dt>
<dd><p>The eigenvectors of the parameter space.
This is a Dictionary of numpy.matrix
Each entry in the dictionary is as described under evals.
Each numpy.matrix contains the eigenvectors which, with the eigenvalues
in evals, are needed to rotate the
coordinate system to one in which the metric is the identity matrix.</p>
</dd></dl>

<dl class="attribute">
<dt id="pycbc.tmpltbank.option_utils.metricParameters.evecsCV">
<code class="descname">evecsCV</code><a class="headerlink" href="#pycbc.tmpltbank.option_utils.metricParameters.evecsCV" title="Permalink to this definition">¶</a></dt>
<dd><p>The eigenvectors of the principal directions of the mu space.
This is a Dictionary of numpy.matrix
Each entry in the dictionary is as described under evals.
Each numpy.matrix contains the eigenvectors which, with the eigenvalues
in evals, are needed to rotate the
coordinate system to one in which the metric is the identity matrix.</p>
</dd></dl>

<dl class="classmethod">
<dt id="pycbc.tmpltbank.option_utils.metricParameters.from_argparse">
<em class="property">classmethod </em><code class="descname">from_argparse</code><span class="sig-paren">(</span><em>opts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#metricParameters.from_argparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.metricParameters.from_argparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an instance of the metricParameters class from an
argparse.OptionParser instance. This assumes that
insert_metric_calculation_options
and
verify_metric_calculation_options
have already been called before initializing the class.</p>
</dd></dl>

<dl class="attribute">
<dt id="pycbc.tmpltbank.option_utils.metricParameters.metric">
<code class="descname">metric</code><a class="headerlink" href="#pycbc.tmpltbank.option_utils.metricParameters.metric" title="Permalink to this definition">¶</a></dt>
<dd><p>The metric of the parameter space.
This is a Dictionary of numpy.matrix
Each entry in the dictionary is as described under evals.
Each numpy.matrix contains the metric of the parameter space in the
Lambda_i coordinate system.</p>
</dd></dl>

<dl class="attribute">
<dt id="pycbc.tmpltbank.option_utils.metricParameters.moments">
<code class="descname">moments</code><a class="headerlink" href="#pycbc.tmpltbank.option_utils.metricParameters.moments" title="Permalink to this definition">¶</a></dt>
<dd><p>Moments structure
This contains the result of all the integrals used in computing the
metrics above. It can be used for the ethinca components calculation,
or other similar calculations. This is composed of two compound
dictionaries. The first entry indicates which moment is being
calculated and the second entry indicates the upper frequency cutoff
that was used.</p>
<p>In all cases x = f/f0.</p>
<p>For the first entries the options are:</p>
<p>moments[‘J%d’ %(i)][f_cutoff]
This stores the integral of
x**((-i)/3.) * delta X / PSD(x)</p>
<p>moments[‘log%d’ %(i)][f_cutoff]
This stores the integral of
(numpy.log(x**(1./3.))) x**((-i)/3.) * delta X / PSD(x)</p>
<p>moments[‘loglog%d’ %(i)][f_cutoff]
This stores the integral of
(numpy.log(x**(1./3.)))**2 x**((-i)/3.) * delta X / PSD(x)</p>
<p>moments[‘loglog%d’ %(i)][f_cutoff]
This stores the integral of
(numpy.log(x**(1./3.)))**3 x**((-i)/3.) * delta X / PSD(x)</p>
<p>moments[‘loglog%d’ %(i)][f_cutoff]
This stores the integral of
(numpy.log(x**(1./3.)))**4 x**((-i)/3.) * delta X / PSD(x)</p>
<p>The second entry stores the frequency cutoff that was used when
computing the integral.</p>
</dd></dl>

<dl class="attribute">
<dt id="pycbc.tmpltbank.option_utils.metricParameters.psd">
<code class="descname">psd</code><a class="headerlink" href="#pycbc.tmpltbank.option_utils.metricParameters.psd" title="Permalink to this definition">¶</a></dt>
<dd><p>A pyCBC FrequencySeries holding the appropriate PSD.
Return the PSD used in the metric calculation.</p>
</dd></dl>

<dl class="attribute">
<dt id="pycbc.tmpltbank.option_utils.metricParameters.time_unprojected_metric">
<code class="descname">time_unprojected_metric</code><a class="headerlink" href="#pycbc.tmpltbank.option_utils.metricParameters.time_unprojected_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>The metric of the parameter space with the time dimension unprojected.
This is a Dictionary of numpy.matrix
Each entry in the dictionary is as described under evals.
Each numpy.matrix contains the metric of the parameter space in the
Lambda_i, t coordinate system. The time components are always in the
last [-1] position in the matrix.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.option_utils.verify_ethinca_metric_options">
<code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">verify_ethinca_metric_options</code><span class="sig-paren">(</span><em>opts</em>, <em>parser</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#verify_ethinca_metric_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.verify_ethinca_metric_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the necessary options are given for the ethinca metric
calculation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>opts</strong> (<em>argparse.Values instance</em>) – Result of parsing the input options with OptionParser</li>
<li><strong>parser</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – The OptionParser instance.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.option_utils.verify_mass_range_options">
<code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">verify_mass_range_options</code><span class="sig-paren">(</span><em>opts</em>, <em>parser</em>, <em>nonSpin=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#verify_mass_range_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.verify_mass_range_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses the metric calculation options given and verifies that they are
correct.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>opts</strong> (<em>argparse.Values instance</em>) – Result of parsing the input options with OptionParser</li>
<li><strong>parser</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – The OptionParser instance.</li>
<li><strong>nonSpin</strong> (<em>boolean</em><em>, </em><em>optional</em><em> (</em><em>default=False</em><em>)</em>) – If this is provided the spin-related options will not be checked.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pycbc.tmpltbank.option_utils.verify_metric_calculation_options">
<code class="descclassname">pycbc.tmpltbank.option_utils.</code><code class="descname">verify_metric_calculation_options</code><span class="sig-paren">(</span><em>opts</em>, <em>parser</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/option_utils.html#verify_metric_calculation_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.option_utils.verify_metric_calculation_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses the metric calculation options given and verifies that they are
correct.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>opts</strong> (<em>argparse.Values instance</em>) – Result of parsing the input options with OptionParser</li>
<li><strong>parser</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – The OptionParser instance.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-pycbc.tmpltbank.partitioned_bank">
<span id="pycbc-tmpltbank-partitioned-bank-module"></span><h2>pycbc.tmpltbank.partitioned_bank module<a class="headerlink" href="#module-pycbc.tmpltbank.partitioned_bank" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank">
<em class="property">class </em><code class="descclassname">pycbc.tmpltbank.partitioned_bank.</code><code class="descname">PartitionedTmpltbank</code><span class="sig-paren">(</span><em>mass_range_params</em>, <em>metric_params</em>, <em>ref_freq</em>, <em>bin_spacing</em>, <em>bin_range_check=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This class is used to hold a template bank partitioned into numerous bins
based on position in the Cartesian parameter space where the axes are the
principal components. It can also be used to hold intermediary
products used while constructing (e.g.) a stochastic template bank.</p>
<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.add_point_by_chi_coords">
<code class="descname">add_point_by_chi_coords</code><span class="sig-paren">(</span><em>chi_coords</em>, <em>mass1</em>, <em>mass2</em>, <em>spin1z</em>, <em>spin2z</em>, <em>point_fupper=None</em>, <em>mus=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.add_point_by_chi_coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.add_point_by_chi_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a point to the partitioned template bank. The point_fupper and mus
kwargs must be provided for all templates if the vary fupper capability
is desired. This requires that the chi_coords, as well as mus and
point_fupper if needed, to be precalculated. If you just have the
masses and don’t want to worry about translations see
add_point_by_masses, which will do translations and then call this.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>chi_coords</strong> (<em>numpy.array</em>) – The position of the point in the chi coordinates.</li>
<li><strong>mass1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The heavier mass of the point to add.</li>
<li><strong>mass2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The lighter mass of the point to add.</li>
<li><strong>spin1z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The [aligned] spin on the heavier body.</li>
<li><strong>spin2z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The [aligned] spin on the lighter body.
The upper frequency cutoff to use for this point. This value must
be one of the ones already calculated in the metric.</li>
<li><strong>mus</strong> (<em>numpy.array</em>) – A 2D array where idx 0 holds the upper frequency cutoff and idx 1
holds the coordinates in the [not covaried] mu parameter space for
each value of the upper frequency cutoff.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.add_point_by_masses">
<code class="descname">add_point_by_masses</code><span class="sig-paren">(</span><em>mass1</em>, <em>mass2</em>, <em>spin1z</em>, <em>spin2z</em>, <em>vary_fupper=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.add_point_by_masses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.add_point_by_masses" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a point to the template bank. This differs from add point to bank
as it assumes that the chi coordinates and the products needed to use
vary_fupper have not already been calculated. This function calculates
these products and then calls add_point_by_chi_coords.
This function also
carries out a number of sanity checks (eg. is the point within the
ranges given by mass_range_params) that add_point_by_chi_coords does
not do for speed concerns.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>mass1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Mass of the heavier body</li>
<li><strong>mass2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Mass of the lighter body</li>
<li><strong>spin1z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Spin of the heavier body</li>
<li><strong>spin2z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Spin of the lighter body</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.add_tmpltbank_from_hdf_file">
<code class="descname">add_tmpltbank_from_hdf_file</code><span class="sig-paren">(</span><em>hdf_fp</em>, <em>vary_fupper=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.add_tmpltbank_from_hdf_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.add_tmpltbank_from_hdf_file" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will take a pointer to an open HDF File object containing
a list of templates and add them into the partitioned template bank
object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>hdf_fp</strong> (<em>h5py.File object</em>) – The template bank in HDF5 format.</li>
<li><strong>vary_fupper</strong> (<em>False</em>) – If given also include the additional information needed to compute
distances with a varying upper frequency cutoff.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.add_tmpltbank_from_xml_table">
<code class="descname">add_tmpltbank_from_xml_table</code><span class="sig-paren">(</span><em>sngl_table</em>, <em>vary_fupper=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.add_tmpltbank_from_xml_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.add_tmpltbank_from_xml_table" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will take a sngl_inspiral_table of templates and add them
into the partitioned template bank object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sngl_table</strong> (<em>sngl_inspiral_table</em>) – List of sngl_inspiral templates.</li>
<li><strong>vary_fupper</strong> (<em>False</em>) – If given also include the additional information needed to compute
distances with a varying upper frequency cutoff.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.calc_point_distance">
<code class="descname">calc_point_distance</code><span class="sig-paren">(</span><em>chi_coords</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.calc_point_distance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.calc_point_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate distance between point and the bank. Return the closest
distance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>chi_coords</strong> (<em>numpy.array</em>) – The position of the point in the chi coordinates.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>min_dist</strong> (<em>float</em>) – The smallest <strong>SQUARED</strong> metric distance between the test point and
the bank.</li>
<li><strong>indexes</strong> (<em>The chi1_bin, chi2_bin and position within that bin at which</em>) – the closest matching point lies.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.calc_point_distance_vary">
<code class="descname">calc_point_distance_vary</code><span class="sig-paren">(</span><em>chi_coords</em>, <em>point_fupper</em>, <em>mus</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.calc_point_distance_vary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.calc_point_distance_vary" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate distance between point and the bank allowing the metric to
vary based on varying upper frequency cutoff. Slower than
calc_point_distance, but more reliable when upper frequency cutoff can
change a lot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>chi_coords</strong> (<em>numpy.array</em>) – The position of the point in the chi coordinates.</li>
<li><strong>point_fupper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The upper frequency cutoff to use for this point. This value must
be one of the ones already calculated in the metric.</li>
<li><strong>mus</strong> (<em>numpy.array</em>) – A 2D array where idx 0 holds the upper frequency cutoff and idx 1
holds the coordinates in the [not covaried] mu parameter space for
each value of the upper frequency cutoff.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>min_dist</strong> (<em>float</em>) – The smallest <strong>SQUARED</strong> metric distance between the test point and
the bank.</li>
<li><strong>indexes</strong> (<em>The chi1_bin, chi2_bin and position within that bin at which</em>) – the closest matching point lies.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.check_bin_existence">
<code class="descname">check_bin_existence</code><span class="sig-paren">(</span><em>chi1_bin</em>, <em>chi2_bin</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.check_bin_existence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.check_bin_existence" title="Permalink to this definition">¶</a></dt>
<dd><p>Given indices for bins in chi1 and chi2 space check that the bin
exists in the object. If not add it. Also check for the existence of
all bins within +/- self.bin_range_check and add if not present.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>chi1_bin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The index of the chi1_bin to check</li>
<li><strong>chi2_bin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The index of the chi2_bin to check</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.find_point_bin">
<code class="descname">find_point_bin</code><span class="sig-paren">(</span><em>chi_coords</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.find_point_bin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.find_point_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a set of coordinates in the chi parameter space, identify the
indices of the chi1 and chi2 bins that the point occurs in. Returns
these indices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>chi_coords</strong> (<em>numpy.array</em>) – The position of the point in the chi coordinates.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>chi1_bin</strong> (<em>int</em>) – Index of the chi_1 bin.</li>
<li><strong>chi2_bin</strong> (<em>int</em>) – Index of the chi_2 bin.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.get_freq_map_and_normalizations">
<code class="descname">get_freq_map_and_normalizations</code><span class="sig-paren">(</span><em>frequency_list</em>, <em>upper_freq_formula</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.get_freq_map_and_normalizations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.get_freq_map_and_normalizations" title="Permalink to this definition">¶</a></dt>
<dd><p>If using the –vary-fupper capability we need to store the mapping
between index and frequencies in the list. We also precalculate the
normalization factor at every frequency, which is used when estimating
overlaps to account for abrupt changes in termination frequency.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>frequency_list</strong> (<em>array of floats</em>) – The frequencies for which the metric has been computed and lie
within the parameter space being considered.</li>
<li><strong>upper_freq_formula</strong> (<em>string</em>) – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.get_point_from_bins_and_idx">
<code class="descname">get_point_from_bins_and_idx</code><span class="sig-paren">(</span><em>chi1_bin</em>, <em>chi2_bin</em>, <em>idx</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.get_point_from_bins_and_idx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.get_point_from_bins_and_idx" title="Permalink to this definition">¶</a></dt>
<dd><p>Find masses and spins given bin numbers and index.</p>
<p>Given the chi1 bin, chi2 bin and an index, return the masses and spins
of the point at that index. Will fail if no point exists there.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>chi1_bin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The bin number for chi1.</li>
<li><strong>chi2_bin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The bin number for chi2.</li>
<li><strong>idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The index within the chi1, chi2 bin.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>mass1</strong> (<em>float</em>) – Mass of heavier body.</li>
<li><strong>mass2</strong> (<em>float</em>) – Mass of lighter body.</li>
<li><strong>spin1z</strong> (<em>float</em>) – Spin of heavier body.</li>
<li><strong>spin2z</strong> (<em>float</em>) – Spin of lighter body.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.output_all_points">
<code class="descname">output_all_points</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.output_all_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.output_all_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all points in the bank.</p>
<p>Return all points in the bank as lists of m1, m2, spin1z, spin2z.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>mass1</strong> (<em>list</em>) – List of mass1 values.</li>
<li><strong>mass2</strong> (<em>list</em>) – List of mass2 values.</li>
<li><strong>spin1z</strong> (<em>list</em>) – List of spin1z values.</li>
<li><strong>spin2z</strong> (<em>list</em>) – List of spin2z values.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.test_point_distance">
<code class="descname">test_point_distance</code><span class="sig-paren">(</span><em>chi_coords</em>, <em>distance_threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.test_point_distance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.test_point_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if the distance between the supplied point and the bank is less
than the supplied distance theshold.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>chi_coords</strong> (<em>numpy.array</em>) – The position of the point in the chi coordinates.</li>
<li><strong>distance_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The <strong>SQUARE ROOT</strong> of the metric distance to test as threshold.
E.g. if you want to test to a minimal match of 0.97 you would
use 1 - 0.97 = 0.03 for this value.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True if point is within the distance threshold. False if not.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.test_point_distance_vary">
<code class="descname">test_point_distance_vary</code><span class="sig-paren">(</span><em>chi_coords</em>, <em>point_fupper</em>, <em>mus</em>, <em>distance_threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycbc/tmpltbank/partitioned_bank.html#PartitionedTmpltbank.test_point_distance_vary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycbc.tmpltbank.partitioned_bank.PartitionedTmpltbank.test_point_distance_vary" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if distance between point and the bank is greater than distance
threshold while allowing the metric to
vary based on varying upper frequency cutoff. Slower than
test_point_distance, but more reliable when upper frequency cutoff can
change a lot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>chi_coords</strong> (<em>numpy.array</em>) – The position of the point in the chi coordinates.</li>
<li><strong>point_fupper</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The upper frequency cutoff to use for this point. This value must
be one of the ones already calculated in the metric.</li>
<li><strong>mus</strong> (<em>numpy.array</em>) – A 2D array where idx 0 holds the upper frequency cutoff and idx 1
holds the coordinates in the [not covaried] mu parameter space for
each value of the upper frequency cutoff.</li>
<li><strong>distance_threshold</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The <strong>SQUARE ROOT</strong> of the metric distance to test as threshold.
E.g. if you want to test to a minimal match of 0.97 you would
use 1 - 0.97 = 0.03 for this value.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True if point is within the distance threshold. False if not.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycbc.tmpltbank">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pycbc.tmpltbank" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tmpltbank.html" class="btn btn-neutral float-left" title="PyCBC template bank generation documentation (pycbc.tmpltbank)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pycbc.psd.html" class="btn btn-neutral float-right" title="pycbc.psd package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015, 2016, 2017, Alexander Nitz, Ian Harry, Christopher M. Biwer, Duncan A.  Brown, Josh Willis, and Tito Dal Canton.
      <span class="lastupdated">Last updated on Oct 20, 2021.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>