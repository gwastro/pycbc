<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sampler API &mdash; PyCBC 0.0a8230 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/terminal.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/typed.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Inference IO" href="io.html" />
    <link rel="prev" title="pycbc_make_inference_inj_workflow: A parameter estimation workflow generator for injections" href="../workflow/pycbc_make_inference_inj_workflow.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> PyCBC
          </a>
              <div class="version">
                1.18.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../credit.html">Use of PyCBC in Scientific Publications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Running PyCBC under Docker</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing PyCBC</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../inference.html">PyCBC inference documentation (<code class="docutils literal notranslate"><span class="pre">pycbc.inference</span></code>)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../inference.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#sampling-the-parameter-space-pycbc-inference">Sampling the parameter space (<code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#visualizing-the-posteriors">Visualizing the Posteriors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#workflows">Workflows</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../inference.html#for-developers">For Developers</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Sampler API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview-guidelines">Overview &amp; Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="#detailed-example">Detailed example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inheritance-diagrams">Inheritance diagrams</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-add-a-sampler">How to add a sampler</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="io.html">Inference IO</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflow/pycbc_make_psd_estimation_workflow.html"><code class="docutils literal notranslate"><span class="pre">pycbc_make_psd_estimation_workflow</span></code>: A workflow generator for noise estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow/pycbc_make_coinc_search_workflow.html"><code class="docutils literal notranslate"><span class="pre">pycbc_make_coinc_search_workflow</span></code>: A workflow to search for gravitational waves</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow/pygrb.html"><code class="docutils literal notranslate"><span class="pre">pycbc_make_offline_grb_workflow</span></code>: A GRB triggered CBC analysis workflow generator</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tmpltbank.html">PyCBC template bank generation documentation (<code class="docutils literal notranslate"><span class="pre">pycbc.tmpltbank</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwinj.html">Hardware injection waveform generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../banksim.html">Calculating the Effectualness (Fitting Factor) of Template Banks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faithsim.html">Dag Generator for Doing Faithfulness Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upload_to_gracedb.html">Uploading triggers to gracedb</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../waveform_plugin.html">Making new waveform approximants available to PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../catalog.html">Catalog of Observed Gravitational-wave Mergers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataquality.html">Query times of valid data, hardware injections, and more.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frame.html">Reading Gravitational-wave Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fft.html">Performing FFTs in PyCBC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gw150914.html">Signal Processing with GW150914</a></li>
<li class="toctree-l1"><a class="reference internal" href="../detector.html">Gravitational-wave Detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../psd.html">Handling PSDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../noise.html">Generating Noise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../waveform.html">Waveforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filter.html">Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distributions.html">Using PyCBC Distributions from PyCBC Inference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../building_bundled_executables.html">Building Bundled Executables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Documenting PyCBC code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Creating Releases of PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../formats/hdf_format.html">HDF files within the PyCBC workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal notranslate"><span class="pre">pycbc.workflow</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">pycbc</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyCBC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../inference.html">PyCBC inference documentation (<code class="docutils literal notranslate"><span class="pre">pycbc.inference</span></code>)</a> &raquo;</li>
      <li>Sampler API</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/inference/sampler_api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="sampler-api">
<h1>Sampler API<a class="headerlink" href="#sampler-api" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="../pycbc.inference.sampler.html#module-pycbc.inference.sampler" title="pycbc.inference.sampler"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycbc.inference.sampler</span></code></a> module is the interface between
<code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code> and the sampling engines, such as <code class="docutils literal notranslate"><span class="pre">emcee</span></code>. Below, we
provide an overview of the general structure of the sampler classes, how it
interacts with <code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code>, and how to add support for new samplers. We
also provide inheritance diagrams for all of the currently supported samplers.</p>
<div class="section" id="overview-guidelines">
<span id="sampler-api-overview"></span><h2>Overview &amp; Guidelines<a class="headerlink" href="#overview-guidelines" title="Permalink to this headline">¶</a></h2>
<p>The following guidelines apply to the sampler classes:</p>
<ol class="arabic simple">
<li>All sampler classes must inherit from the <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler" title="pycbc.inference.sampler.base.BaseSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSampler</span></code></a> class. This is
an <a class="reference external" href="https://docs.python.org/3/library/abc.html#module-abc" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abstract</span> <span class="pre">base</span> <span class="pre">class</span></code></a> that defines methods that all
samplers must implement, as they will be used by <code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code>. (See
<a class="reference external" href="https://www.python-course.eu/python3_abstract_classes.php">this tutorial</a>
for a primer on abstract base classes.)</li>
<li>All sampler classes must have a <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute that is unique across
all sampler classes in <a class="reference internal" href="../pycbc.inference.sampler.html#module-pycbc.inference.sampler" title="pycbc.inference.sampler"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycbc.inference.sampler</span></code></a>. This name is used
to reference the sampler throughout the code, and is how the user specifies
which sampler to use in their config file. For example,
<a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee.EmceeEnsembleSampler" title="pycbc.inference.sampler.emcee.EmceeEnsembleSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmceeEnsembleSampler</span></code></a>’s name is <code class="docutils literal notranslate"><span class="pre">'emcee'</span></code>.</li>
<li>Duplicate code should be avoided. If multiple samplers have common methods,
those methods should be added to one or more support classes that the
samplers can inherit from, in addition to <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler" title="pycbc.inference.sampler.base.BaseSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSampler</span></code></a>. For example, all
MCMC samplers need to be able to compute an autocorrelation length. That
functionality is provided for single-temperature MCMCs in the
<code class="xref py py-class docutils literal notranslate"><span class="pre">MCMCAutocorrSupport</span></code> class. These support classes may themselves be
abstract base classes which add more required methods to samplers that
inherit from them.</li>
<li>Inheritance is kept to one level. For example, if we have sampler class
<code class="docutils literal notranslate"><span class="pre">Foo(Bar,</span> <span class="pre">BaseSampler)</span></code>, both <code class="docutils literal notranslate"><span class="pre">Bar</span></code> and <code class="docutils literal notranslate"><span class="pre">BaseSampler</span></code> do not inherit
from any parent classes, only <code class="docutils literal notranslate"><span class="pre">object</span></code>.</li>
<li>To avoid confusion, only inherited abstract methods should be overridden.</li>
<li>All sampler classes need a corresponding class in the
<a class="reference internal" href="../pycbc.inference.io.html#module-pycbc.inference.io" title="pycbc.inference.io"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycbc.inference.io</span></code></a> module for handling reading and writing. See
<a class="reference internal" href="io.html"><span class="doc">Inference IO</span></a> for more details on IO classes.</li>
</ol>
<p>As mentioned above, the <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler" title="pycbc.inference.sampler.base.BaseSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSampler</span></code></a> class is an abstract base class. It
defines a collection of abstract methods and properties that all samplers must
override in order to function properly. These are (click on the names to see
their documentation):</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler.from_config" title="pycbc.inference.sampler.base.BaseSampler.from_config"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_config</span></code></a></li>
<li><a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler.io" title="pycbc.inference.sampler.base.BaseSampler.io"><code class="xref py py-attr docutils literal notranslate"><span class="pre">io</span></code></a></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_initial_conditions</span></code></li>
<li><a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler.run" title="pycbc.inference.sampler.base.BaseSampler.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run</span></code></a></li>
<li><a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler.checkpoint" title="pycbc.inference.sampler.base.BaseSampler.checkpoint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">checkpoint</span></code></a></li>
<li><a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler.samples" title="pycbc.inference.sampler.base.BaseSampler.samples"><code class="xref py py-attr docutils literal notranslate"><span class="pre">samples</span></code></a></li>
<li><a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler.model_stats" title="pycbc.inference.sampler.base.BaseSampler.model_stats"><code class="xref py py-attr docutils literal notranslate"><span class="pre">model_stats</span></code></a></li>
<li><a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler.finalize" title="pycbc.inference.sampler.base.BaseSampler.finalize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">finalize</span></code></a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="detailed-example">
<h2>Detailed example<a class="headerlink" href="#detailed-example" title="Permalink to this headline">¶</a></h2>
<p>Let’s examine the <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee.EmceeEnsembleSampler" title="pycbc.inference.sampler.emcee.EmceeEnsembleSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmceeEnsembleSampler</span></code></a> class to see how these guidelines
apply in practice. Here is its inheritance structure (click on the names of the
classes to see their documentation):</p>
digraph inheritancef9699c6d9c {
rankdir=TB;
size=&quot;8.0, 12.0&quot;;
  &quot;base.BaseSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class for all inference samplers.&quot;];
  &quot;base_mcmc.BaseMCMC&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class that provides methods common to MCMCs.&quot;];
  &quot;base_mcmc.EnsembleSupport&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.EnsembleSupport&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Adds support for ensemble MCMC samplers.&quot;];
  &quot;emcee.EmceeEnsembleSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee.EmceeEnsembleSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;This class is used to construct an MCMC sampler from the emcee&quot;];
  &quot;base_mcmc.EnsembleSupport&quot; -&gt; &quot;emcee.EmceeEnsembleSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;base_mcmc.BaseMCMC&quot; -&gt; &quot;emcee.EmceeEnsembleSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;base.BaseSampler&quot; -&gt; &quot;emcee.EmceeEnsembleSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
}
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>In addition to <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler" title="pycbc.inference.sampler.base.BaseSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSampler</span></code></a>, <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee.EmceeEnsembleSampler" title="pycbc.inference.sampler.emcee.EmceeEnsembleSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmceeEnsembleSampler</span></code></a> inherits from <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC" title="pycbc.inference.sampler.base_mcmc.BaseMCMC"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMCMC</span></code></a>
and <code class="xref py py-class docutils literal notranslate"><span class="pre">MCMCAutocorrSupport</span></code>.  Inspecting <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC" title="pycbc.inference.sampler.base_mcmc.BaseMCMC"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMCMC</span></code></a>, we see that it implements
several of the methods that <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler" title="pycbc.inference.sampler.base.BaseSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSampler</span></code></a> requires: namely,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">set_initial_conditions</span></code>, <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC.run" title="pycbc.inference.sampler.base_mcmc.BaseMCMC.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run</span></code></a>, and <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC.checkpoint" title="pycbc.inference.sampler.base_mcmc.BaseMCMC.checkpoint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">checkpoint</span></code></a>.
This is because the steps taken in these functions are common across MCMC
samplers. For example, in <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC.run" title="pycbc.inference.sampler.base_mcmc.BaseMCMC.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run</span></code></a>, the sampler is run for blocks of
iterations (specified by <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC.checkpoint_interval" title="pycbc.inference.sampler.base_mcmc.BaseMCMC.checkpoint_interval"><code class="xref py py-attr docutils literal notranslate"><span class="pre">checkpoint_interval</span></code></a>) until the convergence
criteria has been met (which is determined by <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC.set_target" title="pycbc.inference.sampler.base_mcmc.BaseMCMC.set_target"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_target</span></code></a>). This,
generally, is what all MCMC samplers do.</p>
<p><em>How</em> an MCMC sampler is run for some number of iterations is unique to each
sampling engine. To accommodate this, <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC" title="pycbc.inference.sampler.base_mcmc.BaseMCMC"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMCMC</span></code></a> adds <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC.run_mcmc" title="pycbc.inference.sampler.base_mcmc.BaseMCMC.run_mcmc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseMCMC.run_mcmc</span></code></a>,
which it calls from within its <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC.run" title="pycbc.inference.sampler.base_mcmc.BaseMCMC.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run</span></code></a>.  <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC.run_mcmc" title="pycbc.inference.sampler.base_mcmc.BaseMCMC.run_mcmc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseMCMC.run_mcmc</span></code></a> is an
abstract method – <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC" title="pycbc.inference.sampler.base_mcmc.BaseMCMC"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMCMC</span></code></a> is itself an abstract base class. Since
<a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee.EmceeEnsembleSampler" title="pycbc.inference.sampler.emcee.EmceeEnsembleSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmceeEnsembleSampler</span></code></a> inherits from <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler" title="pycbc.inference.sampler.base.BaseSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSampler</span></code></a>, followed by <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC" title="pycbc.inference.sampler.base_mcmc.BaseMCMC"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMCMC</span></code></a> (see
<a class="reference internal" href="#python-inheritance-note"><span class="std std-ref">note</span></a>), <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC" title="pycbc.inference.sampler.base_mcmc.BaseMCMC"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMCMC</span></code></a> fulfils <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler" title="pycbc.inference.sampler.base.BaseSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSampler</span></code></a>’s
requirement that a <code class="docutils literal notranslate"><span class="pre">run</span></code> method be implemented, but replaces it with the
requirement that the class define a <code class="docutils literal notranslate"><span class="pre">run_mcmc</span></code> method.  As a result,
<a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee.EmceeEnsembleSampler" title="pycbc.inference.sampler.emcee.EmceeEnsembleSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmceeEnsembleSampler</span></code></a> has its own <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee.EmceeEnsembleSampler.run_mcmc" title="pycbc.inference.sampler.emcee.EmceeEnsembleSampler.run_mcmc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_mcmc</span></code></a>; this is
where the call to the underlying sampling engine (external to pycbc) is made.</p>
<div class="admonition note" id="python-inheritance-note">
<p class="first admonition-title">Note</p>
<p>In python, the order of inheritance is determined by the order the parents
are given in the class definition, from right to left. For example,
<a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee.EmceeEnsembleSampler" title="pycbc.inference.sampler.emcee.EmceeEnsembleSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmceeEnsembleSampler</span></code></a> is defined as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EmceeEnsembleSampler</span><span class="p">(</span><span class="n">MCMCAutocorrSupport</span><span class="p">,</span> <span class="n">BaseMCMC</span><span class="p">,</span> <span class="n">BaseSampler</span><span class="p">):</span>
</pre></div>
</div>
<p class="last">This means that methods introduced by <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler" title="pycbc.inference.sampler.base.BaseSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSampler</span></code></a> will be overridden by
<a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC" title="pycbc.inference.sampler.base_mcmc.BaseMCMC"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMCMC</span></code></a>, which in turn will be overridden by <code class="xref py py-class docutils literal notranslate"><span class="pre">MCMCAutocorrSupport</span></code>.  For
this reason, all sampler class definitions must have <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler" title="pycbc.inference.sampler.base.BaseSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSampler</span></code></a> listed
last.</p>
</div>
<p>All MCMC samplers need to be able to compute an autocorrelation function (ACF)
and length (ACL). This is used to determine how to thin the chains to obtain
independent samples. Consequently, <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC" title="pycbc.inference.sampler.base_mcmc.BaseMCMC"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMCMC</span></code></a> also adds abstract base methods
<a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC.compute_acf" title="pycbc.inference.sampler.base_mcmc.BaseMCMC.compute_acf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compute_acf</span></code></a> and <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC.compute_acl" title="pycbc.inference.sampler.base_mcmc.BaseMCMC.compute_acl"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compute_acl</span></code></a>; these are called by its
<a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC.checkpoint" title="pycbc.inference.sampler.base_mcmc.BaseMCMC.checkpoint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">checkpoint</span></code></a> method.  The <code class="xref py py-class docutils literal notranslate"><span class="pre">MCMCAutocorrSupport</span></code> class provides these
functions. These functions are provided in a class separate from <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC" title="pycbc.inference.sampler.base_mcmc.BaseMCMC"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMCMC</span></code></a>
because not all MCMC samplers estimate ACF/Ls in the same way. For example,
multi-tempered samplers need to compute ACF/Ls separately for each temperature
chain. Consequently, there is an equivalent class
<code class="xref py py-class docutils literal notranslate"><span class="pre">MultiTemperedAutocorrSupport</span></code> that offers the same functions for
multi-tempered MCMCs. This class is used by, e.g., <code class="xref py py-class docutils literal notranslate"><span class="pre">EmceePTSampler</span></code> (see its
<a class="reference internal" href="#inheritance-emcee-pt"><span class="std std-ref">inheritance diagram</span></a>, below). By making the
compute ACF/L functions abstract base methods in <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC" title="pycbc.inference.sampler.base_mcmc.BaseMCMC"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMCMC</span></code></a>, both single and
multi-tempered MCMC samplers can inherit from <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC" title="pycbc.inference.sampler.base_mcmc.BaseMCMC"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMCMC</span></code></a>.</p>
<p>We see that by separating functionality out into support classes
and using multiple inheritance, we are able to provide support for all of the
unique features of different samplers, while keeping the base API that
<code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code> interacts with simple.</p>
</div>
<div class="section" id="inheritance-diagrams">
<h2>Inheritance diagrams<a class="headerlink" href="#inheritance-diagrams" title="Permalink to this headline">¶</a></h2>
<p>Here are inheritance diagrams for all of the currently supported samplers:</p>
<ul class="simple" id="inheritance-cpnest">
<li><code class="docutils literal notranslate"><span class="pre">cpnest</span></code>:</li>
</ul>
digraph inheritance8bc1911235 {
rankdir=TB;
size=&quot;8.0, 12.0&quot;;
  &quot;sampler.base.BaseSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class for all inference samplers.&quot;];
  &quot;sampler.cpnest.CPNestSampler&quot; [fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,tooltip=&quot;This class is used to construct an CPNest sampler from the cpnest&quot;];
  &quot;sampler.base.BaseSampler&quot; -&gt; &quot;sampler.cpnest.CPNestSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
}
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-dynesty">
<li><code class="docutils literal notranslate"><span class="pre">dynesty</span></code>:</li>
</ul>
digraph inheritance7ba9377ebe {
rankdir=TB;
size=&quot;8.0, 12.0&quot;;
  &quot;sampler.base.BaseSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class for all inference samplers.&quot;];
  &quot;sampler.dynesty.DynestySampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.dynesty.DynestySampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;This class is used to construct an Dynesty sampler from the dynesty&quot;];
  &quot;sampler.base.BaseSampler&quot; -&gt; &quot;sampler.dynesty.DynestySampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
}
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-emcee">
<li><code class="docutils literal notranslate"><span class="pre">emcee</span></code>:</li>
</ul>
digraph inheritanceb6bcb2abed {
rankdir=TB;
size=&quot;8.0, 12.0&quot;;
  &quot;sampler.base.BaseSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class for all inference samplers.&quot;];
  &quot;sampler.base_mcmc.BaseMCMC&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class that provides methods common to MCMCs.&quot;];
  &quot;sampler.base_mcmc.EnsembleSupport&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.EnsembleSupport&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Adds support for ensemble MCMC samplers.&quot;];
  &quot;sampler.emcee.EmceeEnsembleSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee.EmceeEnsembleSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;This class is used to construct an MCMC sampler from the emcee&quot;];
  &quot;sampler.base_mcmc.EnsembleSupport&quot; -&gt; &quot;sampler.emcee.EmceeEnsembleSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;sampler.base_mcmc.BaseMCMC&quot; -&gt; &quot;sampler.emcee.EmceeEnsembleSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;sampler.base.BaseSampler&quot; -&gt; &quot;sampler.emcee.EmceeEnsembleSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
}
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-emcee-pt">
<li><code class="docutils literal notranslate"><span class="pre">emcee_pt</span></code>:</li>
</ul>
digraph inheritance113e3834eb {
rankdir=TB;
size=&quot;8.0, 12.0&quot;;
  &quot;sampler.base.BaseSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class for all inference samplers.&quot;];
  &quot;sampler.base_mcmc.BaseMCMC&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class that provides methods common to MCMCs.&quot;];
  &quot;sampler.base_mcmc.EnsembleSupport&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.EnsembleSupport&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Adds support for ensemble MCMC samplers.&quot;];
  &quot;sampler.base_multitemper.MultiTemperedSupport&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base_multitemper.MultiTemperedSupport&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Provides methods for supporting multi-tempered samplers.&quot;];
  &quot;sampler.emcee_pt.EmceePTSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee_pt.EmceePTSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;This class is used to construct a parallel-tempered MCMC sampler from&quot;];
  &quot;sampler.base_multitemper.MultiTemperedSupport&quot; -&gt; &quot;sampler.emcee_pt.EmceePTSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;sampler.base_mcmc.EnsembleSupport&quot; -&gt; &quot;sampler.emcee_pt.EmceePTSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;sampler.base_mcmc.BaseMCMC&quot; -&gt; &quot;sampler.emcee_pt.EmceePTSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;sampler.base.BaseSampler&quot; -&gt; &quot;sampler.emcee_pt.EmceePTSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
}
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-epsie">
<li><code class="docutils literal notranslate"><span class="pre">epsie</span></code>:</li>
</ul>
digraph inheritance244eb49acc {
rankdir=TB;
size=&quot;8.0, 12.0&quot;;
  &quot;sampler.base.BaseSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class for all inference samplers.&quot;];
  &quot;sampler.base_mcmc.BaseMCMC&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class that provides methods common to MCMCs.&quot;];
  &quot;sampler.base_multitemper.MultiTemperedSupport&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base_multitemper.MultiTemperedSupport&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Provides methods for supporting multi-tempered samplers.&quot;];
  &quot;sampler.epsie.EpsieSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.epsie.EpsieSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Constructs an MCMC sampler using epsie's parallel-tempered sampler.&quot;];
  &quot;sampler.base_multitemper.MultiTemperedSupport&quot; -&gt; &quot;sampler.epsie.EpsieSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;sampler.base_mcmc.BaseMCMC&quot; -&gt; &quot;sampler.epsie.EpsieSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;sampler.base.BaseSampler&quot; -&gt; &quot;sampler.epsie.EpsieSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
}
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-multinest">
<li><code class="docutils literal notranslate"><span class="pre">multinest</span></code>:</li>
</ul>
digraph inheritance23035469da {
rankdir=TB;
size=&quot;8.0, 12.0&quot;;
  &quot;sampler.base.BaseSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class for all inference samplers.&quot;];
  &quot;sampler.multinest.MultinestSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.multinest.MultinestSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;This class is used to construct a nested sampler from&quot;];
  &quot;sampler.base.BaseSampler&quot; -&gt; &quot;sampler.multinest.MultinestSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
}
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-ptemcee">
<li><code class="docutils literal notranslate"><span class="pre">ptemcee</span></code>:</li>
</ul>
digraph inheritance8008110505 {
rankdir=TB;
size=&quot;8.0, 12.0&quot;;
  &quot;sampler.base.BaseSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class for all inference samplers.&quot;];
  &quot;sampler.base_mcmc.BaseMCMC&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.BaseMCMC&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class that provides methods common to MCMCs.&quot;];
  &quot;sampler.base_mcmc.EnsembleSupport&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base_mcmc.EnsembleSupport&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Adds support for ensemble MCMC samplers.&quot;];
  &quot;sampler.ptemcee.PTEmceeSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.ptemcee.PTEmceeSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;This class is used to construct the parallel-tempered ptemcee sampler.&quot;];
  &quot;sampler.base_mcmc.EnsembleSupport&quot; -&gt; &quot;sampler.ptemcee.PTEmceeSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;sampler.base_mcmc.BaseMCMC&quot; -&gt; &quot;sampler.ptemcee.PTEmceeSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;sampler.base.BaseSampler&quot; -&gt; &quot;sampler.ptemcee.PTEmceeSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
}
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-ultranest">
<li><code class="docutils literal notranslate"><span class="pre">ultranest</span></code>:</li>
</ul>
digraph inheritanceea34918a69 {
rankdir=TB;
size=&quot;8.0, 12.0&quot;;
  &quot;sampler.base.BaseSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;Abstract base class for all inference samplers.&quot;];
  &quot;sampler.ultranest.UltranestSampler&quot; [URL=&quot;../pycbc.inference.sampler.html#pycbc.inference.sampler.ultranest.UltranestSampler&quot;,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5)&quot;,target=&quot;_top&quot;,tooltip=&quot;This class is used to construct an Ultranest sampler from the ultranest&quot;];
  &quot;sampler.base.BaseSampler&quot; -&gt; &quot;sampler.ultranest.UltranestSampler&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
}
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="how-to-add-a-sampler">
<span id="id1"></span><h2>How to add a sampler<a class="headerlink" href="#how-to-add-a-sampler" title="Permalink to this headline">¶</a></h2>
<p>To add support for a new sampler, do the following:</p>
<ol class="arabic simple">
<li>Create a file in <code class="docutils literal notranslate"><span class="pre">pycbc/inference/sampler</span></code> for the new sampler’s class.</li>
<li>Add the new class definition. The class must inherit from at least
<a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler" title="pycbc.inference.sampler.base.BaseSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSampler</span></code></a>.</li>
<li>Give a name attribute to the class that is unique across the supported
sampler classes.</li>
<li><a class="reference internal" href="io.html#how-to-add-a-sampler-io"><span class="std std-ref">Add an IO class</span></a> for the sampler to the
<a class="reference internal" href="../pycbc.inference.io.html#module-pycbc.inference.io" title="pycbc.inference.io"><code class="xref py py-mod docutils literal notranslate"><span class="pre">inference.io</span></code></a> modules. Set your new class’s
<code class="docutils literal notranslate"><span class="pre">io</span></code> attribute to point to this new class.</li>
<li>Add any other methods you need to satisfy the <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.base.BaseSampler" title="pycbc.inference.sampler.base.BaseSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseSampler</span></code></a>’s required
methods. When doing so, try to follow the guidelines above: do not duplicate
code, and try to use support classes that offer functionality that you need.
If you think some of the methods will be useful for more than just your
sampler, create a new support class and add those methods to it.  However,
if you’re unsure what is available or you would have to make changes to the
support classes that may break other samplers, just add the methods you need
to your new class definition. Fixing code duplication or rearranging support
classes can be done through the review process when you wish to add your new
sampler to the main gwastro repository.</li>
<li>Add the sampler to the <code class="docutils literal notranslate"><span class="pre">samplers</span></code> dictionary in
<code class="docutils literal notranslate"><span class="pre">pycbc/inference/sampler/__init__.py</span></code> so that <code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code> is aware
of it to use.</li>
<li>When you’re satisfied that your new sampler works,
<a class="reference external" href="https://github.com/gwastro/pycbc/blob/master/CONTRIBUTING.md#open-a-pull-request">file a pull request</a> to get it into the main gwastro repostiory. Thank you for
your contributions!</li>
</ol>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../workflow/pycbc_make_inference_inj_workflow.html" class="btn btn-neutral float-left" title="pycbc_make_inference_inj_workflow: A parameter estimation workflow generator for injections" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="io.html" class="btn btn-neutral float-right" title="Inference IO" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015, 2016, 2017, Alexander Nitz, Ian Harry, Christopher M. Biwer, Duncan A.  Brown, Josh Willis, and Tito Dal Canton.
      <span class="lastupdated">Last updated on Oct 20, 2021.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>