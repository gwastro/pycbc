

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inference IO &mdash; PyCBC 2.10.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=751f435e"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/typed.min.js?v=edb71f0b"></script>
      <script src="../_static/terminal.css?v=d691274a"></script>
      <script src="../_static/theme_overrides.css?v=e4e1d026"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Applications and Workflows" href="../apps.html" />
    <link rel="prev" title="Sampler API" href="sampler_api.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: linear-gradient(0deg, rgba(0,0,0,1) 0%, rgba(193,193,255,1) 85%)" >

          
          
          <a href="../index.html">
            
              <img src="https://raw.githubusercontent.com/gwastro/pycbc-logo/master/pycbc_logo_name.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing PyCBC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credit.html">Use of PyCBC in Scientific Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Library Examples and Interactive Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../searches.html">PyCBC searches</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../inference.html">PyCBC inference documentation (<code class="docutils literal notranslate"><span class="pre">pycbc.inference</span></code>)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../inference.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#configuring-the-model-sampler-priors-and-data">Configuring the model, sampler, priors, and data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#advanced-configuration-settings">Advanced configuration settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#checkpointing-and-output-files">Checkpointing and output files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#visualizing-the-posteriors">Visualizing the Posteriors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../inference.html#workflows">Workflows</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../inference.html#for-developers">For Developers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="sampler_api.html">Sampler API</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Inference IO</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview-guidelines">Overview &amp; Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="#posterior-files">Posterior Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inheritance-diagrams">Inheritance diagrams</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-add-a-sampler-io-class">How to add a sampler IO class</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apps.html">Applications and Workflows</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dev Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extend.html">Extending PyCBC with external plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devs.html">Documentation for Developers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: linear-gradient(0deg, rgba(0,0,0,1) 0%, rgba(193,193,255,1) 85%)" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyCBC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../inference.html">PyCBC inference documentation (<code class="docutils literal notranslate"><span class="pre">pycbc.inference</span></code>)</a></li>
      <li class="breadcrumb-item active">Inference IO</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/gwastro/pycbc/blob/master/docs/inference/io.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="inference-io">
<h1>Inference IO<a class="headerlink" href="#inference-io" title="Link to this heading"></a></h1>
<p>The <a class="reference internal" href="../pycbc.inference.io.html#module-pycbc.inference.io" title="pycbc.inference.io"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycbc.inference.io</span></code></a> module provides classes and utilities for
reading and writing inference results to files. Each sampler must have a unique
class for reading/writing that sampler’s results from/to a file.  These are the
<em>sampler IO classes</em>. Below, we provide an overview of the general structure of
these IO classes.</p>
<section id="overview-guidelines">
<h2>Overview &amp; Guidelines<a class="headerlink" href="#overview-guidelines" title="Link to this heading"></a></h2>
<p>The guidelines for creating sampler IO classes are similar to the <a class="reference internal" href="sampler_api.html#sampler-api-overview"><span class="std std-ref">sampler
classes</span></a>, though only having a single level of
inheritance is not required (since the base file class, <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>,
itself inherits from <code class="xref py py-class docutils literal notranslate"><span class="pre">h5py.File</span></code>). The following apply to
all sampler IO classes:</p>
<ol class="arabic simple">
<li><p>All sampler IO classes must inherit from <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>. This is an
<a class="reference external" href="https://docs.python.org/3/library/abc.html#module-abc" title="(in Python v3.14)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abstract</span> <span class="pre">base</span> <span class="pre">class</span></code></a> that inherits from
<code class="xref py py-class docutils literal notranslate"><span class="pre">h5py.File</span></code>; consequently, all samplers will write to
hdf files.</p></li>
<li><p>All sampler IO classes must have a <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute that is unique across
all IO classes in <a class="reference internal" href="../pycbc.inference.io.html#module-pycbc.inference.io" title="pycbc.inference.io"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycbc.inference.io</span></code></a>. This name is saved to the
file and used to determine which class to read the file with when it is
loaded (see <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.loadfile" title="pycbc.inference.io.loadfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">io.loadfile</span></code></a> for
details). For example, the name attribute for <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.emcee.EmceeFile" title="pycbc.inference.io.emcee.EmceeFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmceeFile</span></code></a> – the IO class
for <a class="reference internal" href="../pycbc.inference.sampler.html#pycbc.inference.sampler.emcee.EmceeEnsembleSampler" title="pycbc.inference.sampler.emcee.EmceeEnsembleSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmceeEnsembleSampler</span></code></a> – is <code class="docutils literal notranslate"><span class="pre">emcee_file</span></code>.</p></li>
<li><p>Duplicate code should be avoided. If multiple samplers have common IO
methods, those methods should be added to one or more support classes that
the IO class can inherit from, in addition to <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>. For
example, all single-temperature MCMC samplers save their samples as
<code class="docutils literal notranslate"><span class="pre">nchains</span> <span class="pre">x</span> <span class="pre">niteraitons</span></code> datasets. Consequently, functionality to read and
write samples for single-temperature MCMC samplers is provided by the
<code class="xref py py-class docutils literal notranslate"><span class="pre">MCMCIO</span></code> class, by the <code class="xref py py-meth docutils literal notranslate"><span class="pre">MCMCIO.read_raw_samples</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">MCMCIO.write_samples</span></code>
methods, respectively.</p></li>
<li><p>The ratio of sampler IO classes to sampler classes should be 1:1. That is,
each sampler should have a unique IO class and each IO class should only be
used by one sampler.</p></li>
<li><p>The files that the sampler IO classes provide IO to are used for
checkpointing by <code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code>, and are the final data product that
the program creates. This means that a sampler IO class must store enough
information to the file such that the sampler can be initialized and
continue running (either to resume for checkpoint, or to use the output of
a run as the initial conditions for another run, to accumulate more
points) as if the sampler had run continuously.</p></li>
<li><p>All samples, including any statistics returned by the
<a class="reference internal" href="../pycbc.inference.models.html#module-pycbc.inference.models" title="pycbc.inference.models"><code class="xref py py-mod docutils literal notranslate"><span class="pre">model</span></code></a> (log likelihood, log prior, etc.)
should be stored as datasets (one for each parameter or statistic) to the
file’s <code class="docutils literal notranslate"><span class="pre">samples</span></code> group. The shape of the datasets may be sampler (and run)
specific.</p></li>
<li><p>All sampler-specific data and metadata should be stored to the file’s
<code class="docutils literal notranslate"><span class="pre">sampler_info</span></code> group. What is in the <code class="docutils literal notranslate"><span class="pre">sampler_info</span></code> group and its
organization may be sampler specific. This is where any additional
information needed to start the sampler from a checkpoint (such as the
random state) should be stored.</p></li>
<li><p>Models may write additional information to the files. For example,
data-dependent models may save the data that was analyzed to the <code class="docutils literal notranslate"><span class="pre">data</span></code>
group.  See the <a class="reference internal" href="../pycbc.inference.models.html#module-pycbc.inference.models" title="pycbc.inference.models"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pycbc.inference.models</span></code></a> module for more details.</p></li>
</ol>
<p>As mentioned above, the <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a> class is the abstract base class
that defines the methods and properties that all sampler IO classes must have.
The abstract methods that IO classes must override are:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile.read_raw_samples" title="pycbc.inference.io.base_hdf.BaseInferenceFile.read_raw_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_raw_samples</span></code></a></p></li>
<li><p><a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile.write_samples" title="pycbc.inference.io.base_hdf.BaseInferenceFile.write_samples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_samples</span></code></a></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_posterior</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_resume_point</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_sampler_metadata</span></code></p></li>
</ul>
</div></blockquote>
</section>
<section id="posterior-files">
<h2>Posterior Files<a class="headerlink" href="#posterior-files" title="Link to this heading"></a></h2>
<p>In addition to the sampler IO classes, there are two special classes who’s
purpose is to just store a posterior. These are the <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> and
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.txt.InferenceTXTFile" title="pycbc.inference.io.txt.InferenceTXTFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">InferenceTXTFile</span></code></a> classes.</p>
<p><a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> read/writes hdf files. Like the sampler IO classes, it inherits
from <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>. The key difference is that all of the datasets in
the <code class="docutils literal notranslate"><span class="pre">samples</span></code> group are simple, flattened 1D arrays representing the
posterior. All sampler IO classes must be able to write their samples to a
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> via their <code class="docutils literal notranslate"><span class="pre">write_posterior</span></code> method (which is required by
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>). A <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> may or may not have other metadata in
it – <code class="docutils literal notranslate"><span class="pre">sampler_info</span></code>, model data, etc. – depending on the file that it was
created from. The only guaranteed property is that the <code class="docutils literal notranslate"><span class="pre">samples</span></code> are 1D
arrays.</p>
<p>Since a <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> may only contain 1D arrays of the samples, it most
likely cannot be used to resume a <code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code> run, as a sampler IO file
can. For example, a multi-tempered MCMC sampler would only write samples from
its coldest temperature chain to a <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a>, discarding samples from the
hotter chains. A <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> is therefore not created by
<code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code>.  Instead, <code class="docutils literal notranslate"><span class="pre">pycbc_inference_extract_samples</span></code> may be run
on a sampler file to produce a <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a>. The primary purpose of a
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> is to provide a compact, easy to read file that is universal
for all samplers.</p>
<p>The <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.txt.InferenceTXTFile" title="pycbc.inference.io.txt.InferenceTXTFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">InferenceTXTFile</span></code></a> class takes this universality one step further: it is a
simple text file containing 1D arrays of the posterior samples for each
parameter. The primary purpose of <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.txt.InferenceTXTFile" title="pycbc.inference.io.txt.InferenceTXTFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">InferenceTXTFile</span></code></a> is to provide an API for
text files that is similar to the sampler IO and <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" title="pycbc.inference.io.posterior.PosteriorFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PosteriorFile</span></code></a> classes, so
that <code class="docutils literal notranslate"><span class="pre">pycbc_inference_plot_posterior</span></code> may be used on results from any
software suite (e.g., this is used to compare results from <code class="docutils literal notranslate"><span class="pre">pycbc_inference</span></code>
to posteriors published by the LIGO Scientific Collaboration).</p>
</section>
<section id="inheritance-diagrams">
<h2>Inheritance diagrams<a class="headerlink" href="#inheritance-diagrams" title="Link to this heading"></a></h2>
<p>The following are inheritance diagrams for all of the currently supported IO
classes:</p>
<ul class="simple" id="inheritance-io-cpnest-file">
<li><p><code class="docutils literal notranslate"><span class="pre">cpnest_file</span></code>:</p></li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-a84ff498e884301e72320ab52ba9b4720c0eb3df.png" alt="Inheritance diagram of pycbc.inference.io.cpnest.CPNestFile" usemap="#inheritance62422d073e" class="inheritance graphviz" /></div>
<map id="inheritance62422d073e" name="inheritance62422d073e">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="67,5,283,31"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="54,79,295,104"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_nested_sampler.BaseNestedSamplerFile" target="_top" title="Class to handle file IO for the nested samplers cpnest and dynesty." alt="" coords="5,152,344,177"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-dynesty-file">
<li><p><code class="docutils literal notranslate"><span class="pre">dynesty_file</span></code>:</p></li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-f381ddcd26e21142bb4ab078486879a1522fbcd7.png" alt="Inheritance diagram of pycbc.inference.io.dynesty.DynestyFile" usemap="#inheritance8ab1bd4ddd" class="inheritance graphviz" /></div>
<map id="inheritance8ab1bd4ddd" name="inheritance8ab1bd4ddd">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="67,5,283,31"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="54,79,295,104"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_nested_sampler.BaseNestedSamplerFile" target="_top" title="Class to handle file IO for the nested samplers cpnest and dynesty." alt="" coords="5,152,344,177"/>
<area shape="rect" id="node5" href="../pycbc.inference.io.html#pycbc.inference.io.dynesty.DynestyFile" target="_top" title="Class to handle file IO for the ``dynesty`` sampler." alt="" coords="255,225,425,251"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.dynesty.CommonNestedMetadataIO" target="_top" title="Provides functions for reading/writing dynesty metadata to file." alt="" coords="369,152,642,177"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-emcee-file">
<li><p><code class="docutils literal notranslate"><span class="pre">emcee_file</span></code>:</p></li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-35c3ce1c26527d3150a094dca0a606ce9e45e76e.png" alt="Inheritance diagram of pycbc.inference.io.emcee.EmceeFile" usemap="#inheritance3b4a8626f3" class="inheritance graphviz" /></div>
<map id="inheritance3b4a8626f3" name="inheritance3b4a8626f3">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="15,5,200,26"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="5,67,210,89"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.CommonMCMCMetadataIO" target="_top" title="Provides functions for reading/writing MCMC metadata to file." alt="" coords="231,67,485,89"/>
<area shape="rect" id="node5" href="../pycbc.inference.io.html#pycbc.inference.io.emcee.EmceeFile" target="_top" title="Class to handle file IO for the ``emcee`` sampler." alt="" coords="292,130,423,151"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.EnsembleMCMCMetadataIO" target="_top" title="Provides functions for reading/writing metadata to file for ensemble" alt="" coords="505,67,763,89"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-emcee-pt-file">
<li><p><code class="docutils literal notranslate"><span class="pre">emcee_pt_file</span></code>:</p></li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-b908626d1c769862e42661303d8091f5d10d9efd.png" alt="Inheritance diagram of pycbc.inference.io.emcee_pt.EmceePTFile" usemap="#inheritance6a38ac3ab2" class="inheritance graphviz" /></div>
<map id="inheritance6a38ac3ab2" name="inheritance6a38ac3ab2">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="14,4,181,24"/>
<area shape="rect" id="node5" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="4,61,190,80"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.CommonMCMCMetadataIO" target="_top" title="Provides functions for reading/writing MCMC metadata to file." alt="" coords="498,4,727,24"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.base_multitemper.CommonMultiTemperedMetadataIO" target="_top" title="Adds support for reading/writing multi&#45;tempered metadata to" alt="" coords="461,61,764,80"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.EnsembleMCMCMetadataIO" target="_top" title="Provides functions for reading/writing metadata to file for ensemble" alt="" coords="209,61,442,80"/>
<area shape="rect" id="node6" href="../pycbc.inference.io.html#pycbc.inference.io.emcee_pt.EmceePTFile" target="_top" title="Class to handle file IO for the ``emcee`` sampler." alt="" coords="253,117,399,137"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-epsie-file">
<li><p><code class="docutils literal notranslate"><span class="pre">epsie_file</span></code>:</p></li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-43f4b6a2bc6e7389b171ecf5cef3c86e2f6ce959.png" alt="Inheritance diagram of pycbc.inference.io.epsie.EpsieFile" usemap="#inheritancefdd5703eb5" class="inheritance graphviz" /></div>
<map id="inheritancefdd5703eb5" name="inheritancefdd5703eb5">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="15,4,193,25"/>
<area shape="rect" id="node5" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="4,65,203,86"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.CommonMCMCMetadataIO" target="_top" title="Provides functions for reading/writing MCMC metadata to file." alt="" coords="479,4,725,25"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.base_multitemper.CommonMultiTemperedMetadataIO" target="_top" title="Adds support for reading/writing multi&#45;tempered metadata to" alt="" coords="440,65,764,86"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.MCMCMetadataIO" target="_top" title="Provides functions for reading/writing metadata to file for MCMCs in" alt="" coords="223,65,420,86"/>
<area shape="rect" id="node6" href="../pycbc.inference.io.html#pycbc.inference.io.epsie.EpsieFile" target="_top" title="Class to handle IO for Epsie&#39;s parallel&#45;tempered sampler." alt="" coords="266,125,377,146"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-multinest-file">
<li><p><code class="docutils literal notranslate"><span class="pre">multinest_file</span></code>:</p></li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-49bf9d266524be009859206f5dfcb5cb0ed9cdfa.png" alt="Inheritance diagram of pycbc.inference.io.multinest.MultinestFile" usemap="#inheritancefd3d78355c" class="inheritance graphviz" /></div>
<map id="inheritancefd3d78355c" name="inheritancefd3d78355c">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="18,5,234,31"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="5,79,247,104"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.multinest.MultinestFile" target="_top" title="Class to handle file IO for the ``multinest`` sampler." alt="" coords="32,152,220,177"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-nessai-file">
<li><p><code class="docutils literal notranslate"><span class="pre">nessai_file</span></code>:</p></li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-b68e0a9c17d78f5f2ee20392e60422d624410547.png" alt="Inheritance diagram of pycbc.inference.io.nessai.NessaiFile" usemap="#inheritance34357ee302" class="inheritance graphviz" /></div>
<map id="inheritance34357ee302" name="inheritance34357ee302">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="67,5,283,31"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="54,79,295,104"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_nested_sampler.BaseNestedSamplerFile" target="_top" title="Class to handle file IO for the nested samplers cpnest and dynesty." alt="" coords="5,152,344,177"/>
<area shape="rect" id="node5" href="../pycbc.inference.io.html#pycbc.inference.io.nessai.NessaiFile" target="_top" title="Class to handle file IO for the ``nessai`` sampler." alt="" coords="265,225,415,251"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.dynesty.CommonNestedMetadataIO" target="_top" title="Provides functions for reading/writing dynesty metadata to file." alt="" coords="369,152,642,177"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-posterior-file">
<li><p><code class="docutils literal notranslate"><span class="pre">posterior_file</span></code>:</p></li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-99282dff716eebff9e975291ab8cacf7a57da3f2.png" alt="Inheritance diagram of pycbc.inference.io.posterior.PosteriorFile" usemap="#inheritance91719698da" class="inheritance graphviz" /></div>
<map id="inheritance91719698da" name="inheritance91719698da">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="5,5,221,31"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" target="_top" title="Class to handle file IO for the simplified Posterior file." alt="" coords="23,79,203,104"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-ptemcee-file">
<li><p><code class="docutils literal notranslate"><span class="pre">ptemcee_file</span></code>:</p></li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-63302b4969d4d61c46d7555583d98ae7d696b4b7.png" alt="Inheritance diagram of pycbc.inference.io.ptemcee.PTEmceeFile" usemap="#inheritance065e2e1370" class="inheritance graphviz" /></div>
<map id="inheritance065e2e1370" name="inheritance065e2e1370">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="14,4,181,24"/>
<area shape="rect" id="node5" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="4,61,190,80"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.CommonMCMCMetadataIO" target="_top" title="Provides functions for reading/writing MCMC metadata to file." alt="" coords="498,4,727,24"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.base_multitemper.CommonMultiTemperedMetadataIO" target="_top" title="Adds support for reading/writing multi&#45;tempered metadata to" alt="" coords="461,61,764,80"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_mcmc.EnsembleMCMCMetadataIO" target="_top" title="Provides functions for reading/writing metadata to file for ensemble" alt="" coords="209,61,442,80"/>
<area shape="rect" id="node6" href="../pycbc.inference.io.html#pycbc.inference.io.ptemcee.PTEmceeFile" target="_top" title="Class to handle file IO for the ``ptemcee`` sampler." alt="" coords="255,117,396,137"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-snowline-file">
<li><p><code class="docutils literal notranslate"><span class="pre">snowline_file</span></code>:</p></li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-94e55b939af5288e9179bf63f02bd6bf41fbd6c4.png" alt="Inheritance diagram of pycbc.inference.io.snowline.SnowlineFile" usemap="#inheritancefc9aa1565d" class="inheritance graphviz" /></div>
<map id="inheritancefc9aa1565d" name="inheritancefc9aa1565d">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="5,5,221,31"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.posterior.PosteriorFile" target="_top" title="Class to handle file IO for the simplified Posterior file." alt="" coords="23,79,203,104"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.snowline.SnowlineFile" target="_top" title="Class to handle file IO for the ``snowline`` sampler." alt="" coords="22,152,205,177"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple" id="inheritance-io-ultranest-file">
<li><p><code class="docutils literal notranslate"><span class="pre">ultranest_file</span></code>:</p></li>
</ul>
<div class="graphviz"><img src="../_images/inheritance-47e9a8870a3789f8706f5c886a423d5d9cd15af7.png" alt="Inheritance diagram of pycbc.inference.io.ultranest.UltranestFile" usemap="#inheritance4db37bd585" class="inheritance graphviz" /></div>
<map id="inheritance4db37bd585" name="inheritance4db37bd585">
<area shape="rect" id="node1" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" target="_top" title="Base class for all inference hdf files." alt="" coords="67,5,283,31"/>
<area shape="rect" id="node3" href="../pycbc.inference.io.html#pycbc.inference.io.base_sampler.BaseSamplerFile" target="_top" title="Base HDF class for all samplers." alt="" coords="54,79,295,104"/>
<area shape="rect" id="node2" href="../pycbc.inference.io.html#pycbc.inference.io.base_nested_sampler.BaseNestedSamplerFile" target="_top" title="Class to handle file IO for the nested samplers cpnest and dynesty." alt="" coords="5,152,344,177"/>
<area shape="rect" id="node4" href="../pycbc.inference.io.html#pycbc.inference.io.ultranest.UltranestFile" target="_top" title="Class to handle file IO for the ``ultranest`` sampler." alt="" coords="83,225,266,251"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="how-to-add-a-sampler-io-class">
<span id="how-to-add-a-sampler-io"></span><h2>How to add a sampler IO class<a class="headerlink" href="#how-to-add-a-sampler-io-class" title="Link to this heading"></a></h2>
<p>If you are <a class="reference internal" href="sampler_api.html#how-to-add-a-sampler"><span class="std std-ref">adding support for a new sampler</span></a> you
will also need to add a new sampler IO class. The following are steps to do
that:</p>
<ol class="arabic simple">
<li><p>Create a file in <code class="docutils literal notranslate"><span class="pre">pycbc/inference/io</span></code> for the new sampler IO class.</p></li>
<li><p>Add the new class definition. The class must inherit from at least
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>.</p></li>
<li><p>Give a name attribute to the class that is unique across the sampler IO
classes.</p></li>
<li><p>Add any other methods you need to satisfy the <a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.base_hdf.BaseInferenceFile" title="pycbc.inference.io.base_hdf.BaseInferenceFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseInferenceFile</span></code></a>’s required
methods, plus other functionality needed to read/write relevant metadata
about the sampler. You are free to write as much metadata in any format you
like to the <code class="docutils literal notranslate"><span class="pre">sampler_info</span></code> group. When adding methods, try to follow the
guidelines above: do not duplicate code, and try to use support classes that
offer functionality that you need. If you think some of the methods will be
useful for more than just your sampler, create a new support class and add
those methods to it.  However, if you’re unsure what is available or how
best to arrange things, just add the methods you need to your new class
definition. Fixing code duplication or updating support classes to can be
done through the review process when you wish to add your new sampler to the
main gwastro repository.</p></li>
<li><p>Add the sampler IO class to the <code class="docutils literal notranslate"><span class="pre">filetypes</span></code> dictionary in
<code class="docutils literal notranslate"><span class="pre">pycbc/inference/io/__init__.py</span></code> so that
<a class="reference internal" href="../pycbc.inference.io.html#pycbc.inference.io.loadfile" title="pycbc.inference.io.loadfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">io.loadfile</span></code></a> is aware of it to use.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sampler_api.html" class="btn btn-neutral float-left" title="Sampler API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../apps.html" class="btn btn-neutral float-right" title="Applications and Workflows" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015, 2016, 2017, Alexander Nitz, Ian Harry, Christopher M. Biwer, Duncan A.  Brown, Josh Willis, and Tito Dal Canton.
      <span class="lastupdated">Last updated on Oct 28, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>